/// <reference path="./RGLM.ts">
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.rglm = exports.rgl = void 0;
const tslib_1 = require("tslib");
const assert = tslib_1.__importStar(require("assert"));
const event = tslib_1.__importStar(require("events"));
const readline = tslib_1.__importStar(require("readline"));
const fs = tslib_1.__importStar(require("fs-extra"));
const os = tslib_1.__importStar(require("os"));
const path = tslib_1.__importStar(require("path"));
const rglm = tslib_1.__importStar(require("./RGLM"));
exports.rglm = rglm;
const util = tslib_1.__importStar(require("util"));
var rgl;
(function (rgl) {
    const dbg = util.debuglog("RGL");
    dbg(`ins ${__dirname}`);
    rgl.scrollUp = (by = 1) => `\x1b[${by}S`, rgl.scrollDown = (by = 1) => `\x1b[${by}T`, rgl.save = `\x1b7\x1b[s`, rgl.restore = `\x1b8\x1b[u`, rgl.mouseOn = `\x1b[?1000h\x1b[?1005h\x1b[?1003h\x1b[?1015h\x1b[?1006h`, rgl.mouseOff = `\x1b[?1000l\x1b[?1005l\x1b[?1003l\x1b[?1015l\x1b[?1006l`;
    /**
     * Main packaging Class
     */
    class RGL extends event.EventEmitter {
        cfg;
        /**
         * TTY streams bound to app
         */
        _bound = {
            sin: process.stdin,
            sout: process.stdout,
            serr: process.stderr,
            sinbind: null,
        };
        /**
         * SOUT cursor state
         */
        cursor = [0, 0];
        /**
         * Source of package Config in case of fs load
         */
        #_loadedFrom = "";
        static defaults = {
            description: "",
            main: "./main.js",
            version: "0.1",
            mappings: "./mappings.js",
            name: process.title,
            keywords: [],
            "$schema": path.join(__dirname, "../../rglcfg.schema.json")
        };
        /**
         * Special keys for convenience
         */
        static special_keys = {
            ctrlC: Buffer.from("03", "hex"),
            ctrlV: Buffer.from("16", "hex"),
            ctrlZ: Buffer.from("1a", "hex"),
            ctrlY: Buffer.from("19", "hex"),
            up: Buffer.from("1b5b41", "hex"),
            down: Buffer.from("1b5b42", "hex"),
            right: Buffer.from("1b5b43", "hex"),
            left: Buffer.from("1b5b44", "hex"),
            shiftUp: Buffer.from("1b5b313b3241", "hex"),
            shiftDown: Buffer.from("1b5b313b3242", "hex"),
            shiftRight: Buffer.from("1b5b313b3243", "hex"),
            shiftLeft: Buffer.from("1b5b313b3244", "hex"),
            ctrlUp: Buffer.from("1b5b313b3541", "hex"),
            ctrlDown: Buffer.from("1b5b313b3542", "hex"),
            ctrlRight: Buffer.from("1b5b313b3543", "hex"),
            ctrlLeft: Buffer.from("1b5b313b3544", "hex"),
            ctrlShiftUp: Buffer.from("1b5b313b3641", "hex"),
            ctrlShiftDown: Buffer.from("1b5b313b3642", "hex"),
            ctrlShiftRight: Buffer.from("1b5b313b3643", "hex"),
            ctrlShiftLeft: Buffer.from("1b5b313b3644", "hex"),
            enter: Buffer.from("0d", "hex"),
            altEnter: Buffer.from("1b0d", "hex"),
            back: Buffer.from("08", "hex"),
            del: Buffer.from("1b5b337e", "hex"),
            tab: Buffer.from("09", "hex"),
        };
        constructor(cfg) {
            super();
            this.cfg = cfg;
            this.cfg = Object.assign(Object.assign(Object.create(null), RGL.defaults), cfg);
            assert.ok(this.cfg.name, "RGL 'name' must be provided in the config");
            this.cfg.main = "./" + path.win32.normalize(this.cfg.main || "./main.js");
            this.cfg.mappings = "./" + path.win32.normalize(this.cfg.mappings || "./mappings.js");
            //process.stdout.write(`\x1b]0;${this.cfg.name}\a`);
            process.title = this.cfg.name || process.title || "RGL";
            this.parseMappings();
        } //ctor
        get dimens() {
            return this.sout?.getWindowSize() || [0, 0];
        } //g-dimens
        get cDpt() {
            return this.colorDepth();
        } //g-cDpt
        get serr() {
            return this._bound.serr || this._bound.sout || process.stderr;
        } //g-serr
        get sout() {
            return this._bound.sout || process.stdout;
        } //g-sout
        get sin() {
            return this._bound.sin || process.stdin;
        } //g-sin
        /**
         * Parse Mappings from File
         */
        parseMappings(from = this.cfg.mappings) {
            assert.ok(from, "'mappings' must be a valid path");
            from = path.win32.join(process.cwd(), from);
            delete require.cache[from];
            try {
                return rglm.RGLM.RGLMChunk.mappings = require(from);
            }
            catch (e) {
                return rglm.RGLM.RGLMChunk.mappings = require(path.join(__dirname, "../../mappings.js"));
            }
        } //parseMappings
        /**
         * Capture keys from SIN
         */
        capture(which = this.sin, bind = true, out = this.sout, err = this.serr) {
            assert.ok(which.isTTY && out.isTTY && err.isTTY, "Stream must be TTY");
            if ((which.isRaw && !bind) || (!which.isRaw && bind))
                which.setRawMode(bind);
            if (this._bound.sinbind && this._bound.sin) {
                this.sin.removeListener("data", this._bound.sinbind);
                this._bound.sinbind = null;
                this.serr.write(rgl.mouseOff);
            }
            if (which.isRaw) {
                which.on("data", this._bound.sinbind = (key) => {
                    this.emit("rawkey", key, key.length > 1 && key[0] == 0x1b, key.length > 1 ? key.slice(1) : key.slice(0));
                    this.emit("rawctrlkey", key, Buffer.from([(Array.from(key.values()).pop() ?? 0) + 0x61 - 1]), key.length > 1 && key[0] == 0x1b, key.length > 1 ? key.slice(1) : key.slice(0));
                    this.emit("key", key.toString("utf8"), key.length > 1 && key[0] == 0x1b, (key.length > 1 ? key.slice(1) : key.slice(0)).toString("utf8"));
                });
            }
            this._bound.sin = which;
            this._bound.sout = out;
            this._bound.serr = err;
            this.serr.write(rgl.mouseOn);
            this.emit("debug", `TTY set to ${bind}`);
            return which.isRaw;
        } //capture
        /**
         * Load package Config from File
         */
        static async load(from = "./package.json") {
            if (typeof from == "string") {
                from = path.win32.resolve(from);
                let out = new RGL(await fs.readJSON(from, {
                    encoding: "ascii",
                    flag: "r"
                }));
                out.#_loadedFrom = from;
                return out;
            }
            else
                return new RGL(from);
        } //load
        /**
         * Store package Config to File
         */
        async store(to = this.#_loadedFrom || "./package.json", repl, pad = 2) {
            assert.ok(to && typeof to == "string", "'config' must be a valid path");
            return await fs.writeJSON(to, this.cfg, {
                EOL: os.EOL,
                encoding: "ascii",
                mode: 0o775,
                spaces: pad,
                replacer: repl,
                flag: "w"
            });
        } //store
        /**
         * Launch package entry
         */
        exec(from = this.cfg.main || "./main.js") {
            assert.ok(from, "'main' must be a valid path");
            from = path.win32.join(process.cwd(), from);
            delete require.cache[from];
            try {
                return require(from)(this, module);
            }
            catch (e) {
                return require(path.win32.join(process.cwd(), "./main.js"))(this, module);
            }
        } //exec
        /**
         * Write-and-count to SOUT
         */
        write(d = "", ...data) {
            if (d instanceof Buffer)
                d = d.toString("ascii");
            else if (d instanceof Uint8Array)
                d = d.join('');
            d = d.toString().replaceAll('\t', ' '.repeat(4)).replaceAll(/((?<!\r)\n(?!\r)|(?<!\n)\r(?!\n)|\r\n|\n\r)/gmis, '\n');
            const chs = d.split('\n'), len = chs.length - 1;
            if (len >= 1)
                this.cursor[0] = chs[len].length;
            else
                this.cursor[0] += chs[len].length;
            this.cursor[0] %= this.sout.columns;
            this.cursor[1] = Math.min(this.cursor[1] + len, this.sout.rows);
            const out = this.sout.write(d);
            this.emit("write", d);
            if (!out)
                process.nextTick(() => this.sout.uncork());
            data.forEach(dt => this.write(dt));
            return out;
        } //write
        /**
         * Write-and-count-newline to SOUT
         */
        writeE(...data) {
            return this.write(data.shift(), ...data, os.EOL);
        } //writeE
        /**
         * Get TTY color depth
         */
        colorDepth(env = process.env) {
            return this.sout.getColorDepth(env);
        } //colorDepth
        /**
         * Move-and-count SOUT cursor
         */
        async move(x, y, rel = false) {
            if (!rel)
                x = Math.min(Math.max(x, 0), this.dimens[0]);
            else
                x = Math.min(Math.max(x, -this.dimens[0]), this.dimens[0]);
            if (!rel && y)
                y = Math.min(Math.max(y, 0), this.dimens[1]);
            else if (rel && y)
                y = Math.min(Math.max(y, -this.dimens[1]), this.dimens[1]);
            return new Promise((res, rej) => {
                let data;
                this.emit("move", x, y, rel);
                if (!rel) {
                    this.cursor[0] = x;
                    this.cursor[1] = y ?? this.cursor[1];
                    data = readline.cursorTo(this.sout, x, y, () => res(data));
                }
                else {
                    if (x)
                        this.cursor[0] += x;
                    if (y)
                        this.cursor[1] += y;
                    data = readline.moveCursor(this.sout, x, y ?? 0, () => res(data));
                }
            });
        } //move
        /**
         * Clear-and-restore SOUT
         */
        async clear(lines, dir = 0, rel) {
            return new Promise(async (res, rej) => {
                const sav = [...this.cursor];
                let out = true;
                if (!lines) {
                    this.move(0, 0, rel).then(() => {
                        out = readline.clearScreenDown(this.sout, () => {
                            this.move(...sav, false).then(() => res(out));
                        });
                    });
                }
                else if (typeof lines == "number" && lines < 0)
                    out = readline.clearLine(this.sout, dir, () => {
                        this.move(...sav, false).then(() => res(out));
                    });
                else if (typeof lines == "number") {
                    this.move(0, lines, rel).then(() => {
                        out = readline.clearLine(this.sout, dir, () => {
                            this.move(...sav, false).then(() => res(out));
                        });
                    });
                }
                else
                    return Promise.all(lines.map(l => this.clear(l, dir, rel))).then(bs => res(bs.every(b => b)), rej);
                this.emit("clear", lines, dir, rel, out);
            });
        } //clear
        once(eventname, listener) {
            return super.on(eventname, listener);
        } //once
        on(eventname, listener) {
            return super.on(eventname, listener);
        } //on
        emit(eventname, ...args) {
            return super.emit(eventname, ...args);
        } //emit
    } //RGL
    rgl.RGL = RGL;
})(rgl = exports.rgl || (exports.rgl = {})); //rgl
exports.default = rgl;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmdsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vbGliL3JnbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQ0FBZ0M7QUFFaEMsWUFBWSxDQUFDOzs7O0FBV2IsdURBQWlDO0FBQ2pDLHNEQUFnQztBQUNoQywyREFBcUM7QUFFckMscURBQStCO0FBQy9CLCtDQUF5QjtBQUN6QixtREFBNkI7QUFDN0IscURBQStCO0FBMFl0QixvQkFBSTtBQXpZYixtREFBNkI7QUFFN0IsSUFBYyxHQUFHLENBcVloQjtBQXJZRCxXQUFjLEdBQUc7SUFFaEIsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUVqQyxHQUFHLENBQUMsT0FBTyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBRVgsWUFBUSxHQUFHLENBQUMsS0FBc0IsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUNqRSxjQUFVLEdBQUcsQ0FBQyxLQUFzQixDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQ3ZELFFBQUksR0FBRyxhQUFhLEVBQ3BCLFdBQU8sR0FBRyxhQUFhLEVBQ3ZCLFdBQU8sR0FBRyx5REFBeUQsRUFDbkUsWUFBUSxHQUFHLHlEQUF5RCxDQUFDO0lBZXRFOztPQUVHO0lBQ0gsTUFBYSxHQUFJLFNBQVEsS0FBSyxDQUFDLFlBQVk7UUEyRnBCO1FBekZ0Qjs7V0FFRztRQUNLLE1BQU0sR0FLVjtZQUNILEdBQUcsRUFBRSxPQUFPLENBQUMsS0FBSztZQUNsQixJQUFJLEVBQUUsT0FBTyxDQUFDLE1BQU07WUFDcEIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1lBQ3BCLE9BQU8sRUFBRSxJQUFJO1NBQ2IsQ0FBQztRQUNGOztXQUVHO1FBQ0gsTUFBTSxHQUFxQixDQUFFLENBQUMsRUFBRSxDQUFDLENBQUUsQ0FBQztRQUNwQzs7V0FFRztRQUNILFlBQVksR0FBVyxFQUFFLENBQUM7UUFF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d0JBQzlCLEdBQUcsR0FBRyxRQUFRLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFOzRCQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFDL0MsQ0FBQyxDQUFDLENBQUM7b0JBQ0osQ0FBQyxDQUFDLENBQUM7aUJBQ0g7cUJBQU0sSUFBSSxPQUFPLEtBQUssSUFBSSxRQUFRLElBQUksS0FBSyxHQUFHLENBQUM7b0JBQy9DLEdBQUcsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTt3QkFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQy9DLENBQUMsQ0FBQyxDQUFDO3FCQUNDLElBQUksT0FBTyxLQUFLLElBQUksUUFBUSxFQUFFO29CQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxLQUFLLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTt3QkFDbEMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFOzRCQUM3QyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFDL0MsQ0FBQyxDQUFDLENBQUM7b0JBQ0osQ0FBQyxDQUFDLENBQUM7aUJBQ0g7O29CQUNBLE9BQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7Z0JBRXBHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQzFDLENBQUMsQ0FBQyxDQUFDO1FBQ0osQ0FBQyxDQUFDLE9BQU87UUFXVCxJQUFJLENBQUMsU0FBMEIsRUFBRSxRQUFrQztZQUNsRSxPQUFPLEtBQUssQ0FBQyxFQUFFLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1FBQ3RDLENBQUMsQ0FBQyxNQUFNO1FBVVIsRUFBRSxDQUFDLFNBQTBCLEVBQUUsUUFBa0M7WUFDaEUsT0FBTyxLQUFLLENBQUMsRUFBRSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUN0QyxDQUFDLENBQUMsSUFBSTtRQVVOLElBQUksQ0FBQyxTQUEwQixFQUFFLEdBQUcsSUFBVztZQUM5QyxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7UUFDdkMsQ0FBQyxDQUFDLE1BQU07TUFFUCxLQUFLO0lBdFdNLE9BQUcsTUFzV2YsQ0FBQTtBQUVGLENBQUMsRUFyWWEsR0FBRyxHQUFILFdBQUcsS0FBSCxXQUFHLFFBcVloQixDQUFDLEtBQUs7QUFJUCxrQkFBZSxHQUFHLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9SR0xNLnRzXCI+XHJcblxyXG5cInVzZSBzdHJpY3RcIjtcclxuXHJcbmV4cG9ydCB0eXBlIE9wdGlvbmFsc09ubHk8VCBleHRlbmRzIG9iamVjdD4gPSBQaWNrPFQsIEV4Y2x1ZGU8e1xyXG5cdFtLIGluIGtleW9mIFRdPzogVCBleHRlbmRzIFJlY29yZDxLLCBUW0tdPiA/IG5ldmVyIDogS1xyXG59W2tleW9mIFRdLCB1bmRlZmluZWQ+PjtcclxuZXhwb3J0IHR5cGUgTm9uT3B0aW9uYWxzPFQgZXh0ZW5kcyBvYmplY3Q+ID0ge1xyXG5cdFtrIGluIGtleW9mIFRdLT86IHVuZGVmaW5lZCBleHRlbmRzIFRba10gPyBuZXZlciA6IGtcclxufVtrZXlvZiBUXTtcclxuZXhwb3J0IHR5cGUgTnVsbGFibGU8VD4gPSBUIHwgbnVsbCB8IHVuZGVmaW5lZDtcclxuZXhwb3J0IHR5cGUgTnVsbGFibGVBcnJheTxUPiA9IFsgXSB8IFQ7XHJcblxyXG5pbXBvcnQgKiBhcyBhc3NlcnQgZnJvbSBcImFzc2VydFwiO1xyXG5pbXBvcnQgKiBhcyBldmVudCBmcm9tIFwiZXZlbnRzXCI7XHJcbmltcG9ydCAqIGFzIHJlYWRsaW5lIGZyb20gXCJyZWFkbGluZVwiO1xyXG5pbXBvcnQgKiBhcyB0dHkgZnJvbSBcInR0eVwiO1xyXG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcclxuaW1wb3J0ICogYXMgb3MgZnJvbSBcIm9zXCI7XHJcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcclxuaW1wb3J0ICogYXMgcmdsbSBmcm9tIFwiLi9SR0xNXCI7XHJcbmltcG9ydCAqIGFzIHV0aWwgZnJvbSBcInV0aWxcIjtcclxuXHJcbmV4cG9ydCBtb2R1bGUgcmdsIHtcclxuXHRcclxuXHRjb25zdCBkYmcgPSB1dGlsLmRlYnVnbG9nKFwiUkdMXCIpO1xyXG5cdFxyXG5cdGRiZyhgaW5zICR7X19kaXJuYW1lfWApO1xyXG5cdFxyXG5cdGV4cG9ydCBjb25zdCBzY3JvbGxVcCA9IChieTogbnVtYmVyIHwgc3RyaW5nID0gMSkgPT4gYFxceDFiWyR7Ynl9U2AsXHJcblx0XHRzY3JvbGxEb3duID0gKGJ5OiBudW1iZXIgfCBzdHJpbmcgPSAxKSA9PiBgXFx4MWJbJHtieX1UYCxcclxuXHRcdHNhdmUgPSBgXFx4MWI3XFx4MWJbc2AsXHJcblx0XHRyZXN0b3JlID0gYFxceDFiOFxceDFiW3VgLFxyXG5cdFx0bW91c2VPbiA9IGBcXHgxYls/MTAwMGhcXHgxYls/MTAwNWhcXHgxYls/MTAwM2hcXHgxYls/MTAxNWhcXHgxYls/MTAwNmhgLFxyXG5cdFx0bW91c2VPZmYgPSBgXFx4MWJbPzEwMDBsXFx4MWJbPzEwMDVsXFx4MWJbPzEwMDNsXFx4MWJbPzEwMTVsXFx4MWJbPzEwMDZsYDtcclxuXHRcclxuXHQvKipcclxuXHQgKiBQYWNrYWdlIENvbmZpZ1xyXG5cdCAqL1xyXG5cdGV4cG9ydCBpbnRlcmZhY2UgUkdMQ2ZnIHtcclxuXHRcdG5hbWU6IHN0cmluZztcclxuXHRcdGRlc2NyaXB0aW9uPzogc3RyaW5nO1xyXG5cdFx0bWFpbjogc3RyaW5nO1xyXG5cdFx0dmVyc2lvbj86IHN0cmluZztcclxuXHRcdG1hcHBpbmdzPzogc3RyaW5nO1xyXG5cdFx0a2V5d29yZHM/OiBzdHJpbmdbXTtcclxuXHRcdFwiJHNjaGVtYVwiPzogc3RyaW5nO1xyXG5cdH0gLy9SR0xDZmdcclxuXHRcclxuXHQvKipcclxuXHQgKiBNYWluIHBhY2thZ2luZyBDbGFzc1xyXG5cdCAqL1xyXG5cdGV4cG9ydCBjbGFzcyBSR0wgZXh0ZW5kcyBldmVudC5FdmVudEVtaXR0ZXIge1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFRUWSBzdHJlYW1zIGJvdW5kIHRvIGFwcFxyXG5cdFx0ICovXHJcblx0XHRwcml2YXRlIF9ib3VuZDoge1xyXG5cdFx0XHRzaW4/OiB0dHkuUmVhZFN0cmVhbSxcclxuXHRcdFx0c291dD86IHR0eS5Xcml0ZVN0cmVhbSxcclxuXHRcdFx0c2Vycj86IHR0eS5Xcml0ZVN0cmVhbSxcclxuXHRcdFx0c2luYmluZD86IE51bGxhYmxlPChrZXk6IEJ1ZmZlcikgPT4gYW55PixcclxuXHRcdH0gPSB7XHJcblx0XHRcdHNpbjogcHJvY2Vzcy5zdGRpbixcclxuXHRcdFx0c291dDogcHJvY2Vzcy5zdGRvdXQsXHJcblx0XHRcdHNlcnI6IHByb2Nlc3Muc3RkZXJyLFxyXG5cdFx0XHRzaW5iaW5kOiBudWxsLFxyXG5cdFx0fTtcclxuXHRcdC8qKlxyXG5cdFx0ICogU09VVCBjdXJzb3Igc3RhdGVcclxuXHRcdCAqL1xyXG5cdFx0Y3Vyc29yOiBbbnVtYmVyLCBudW1iZXJdID0gWyAwLCAwIF07XHJcblx0XHQvKipcclxuXHRcdCAqIFNvdXJjZSBvZiBwYWNrYWdlIENvbmZpZyBpbiBjYXNlIG9mIGZzIGxvYWRcclxuXHRcdCAqL1xyXG5cdFx0I19sb2FkZWRGcm9tOiBzdHJpbmcgPSBcIlwiO1xyXG5cdFx0XHJcblx0XHRzdGF0aWMgcmVhZG9ubHkgZGVmYXVsdHM6IFBhcnRpYWw8UkdMQ2ZnPiA9IHtcclxuXHRcdFx0ZGVzY3JpcHRpb246IFwiXCIsXHJcblx0XHRcdG1haW46IFwiLi9tYWluLmpzXCIsXHJcblx0XHRcdHZlcnNpb246IFwiMC4xXCIsXHJcblx0XHRcdG1hcHBpbmdzOiBcIi4vbWFwcGluZ3MuanNcIixcclxuXHRcdFx0bmFtZTogcHJvY2Vzcy50aXRsZSxcclxuXHRcdFx0a2V5d29yZHM6IFsgXSxcclxuXHRcdFx0XCIkc2NoZW1hXCI6IHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vcmdsY2ZnLnNjaGVtYS5qc29uXCIpXHJcblx0XHR9O1xyXG5cdFx0LyoqXHJcblx0XHQgKiBTcGVjaWFsIGtleXMgZm9yIGNvbnZlbmllbmNlXHJcblx0XHQgKi9cclxuXHRcdHN0YXRpYyByZWFkb25seSBzcGVjaWFsX2tleXM6IHtcclxuXHRcdFx0Y3RybEM6XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxWOlx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRjdHJsWjpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybFk6XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdHVwOlx0XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGRvd246XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdHJpZ2h0Olx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRsZWZ0Olx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRzaGlmdFVwOlx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0c2hpZnREb3duOlx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0c2hpZnRSaWdodDpcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdHNoaWZ0TGVmdDpcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxVcDpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybERvd246XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRjdHJsUmlnaHQ6XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRjdHJsTGVmdDpcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxTaGlmdFVwOlx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxTaGlmdERvd246XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybFNoaWZ0UmlnaHQ6XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybFNoaWZ0TGVmdDpcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRlbnRlcjpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0YWx0RW50ZXI6XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRiYWNrOlx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRkZWw6XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdHRhYjpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdH0gPSB7XHJcblx0XHRcdGN0cmxDOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMDNcIixcdFx0XHRcImhleFwiKSxcclxuXHRcdFx0Y3RybFY6XHRcdFx0QnVmZmVyLmZyb20oXCIxNlwiLFx0XHRcdFwiaGV4XCIpLFxyXG5cdFx0XHRjdHJsWjpcdFx0XHRCdWZmZXIuZnJvbShcIjFhXCIsXHRcdFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxZOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMTlcIixcdFx0XHRcImhleFwiKSxcclxuXHRcdFx0dXA6XHRcdFx0XHRCdWZmZXIuZnJvbShcIjFiNWI0MVwiLFx0XHRcImhleFwiKSxcclxuXHRcdFx0ZG93bjpcdFx0XHRCdWZmZXIuZnJvbShcIjFiNWI0MlwiLFx0XHRcImhleFwiKSxcclxuXHRcdFx0cmlnaHQ6XHRcdFx0QnVmZmVyLmZyb20oXCIxYjViNDNcIixcdFx0XCJoZXhcIiksXHJcblx0XHRcdGxlZnQ6XHRcdFx0QnVmZmVyLmZyb20oXCIxYjViNDRcIixcdFx0XCJoZXhcIiksXHJcblx0XHRcdHNoaWZ0VXA6XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzMjQxXCIsXHRcImhleFwiKSxcclxuXHRcdFx0c2hpZnREb3duOlx0XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzI0MlwiLFx0XCJoZXhcIiksXHJcblx0XHRcdHNoaWZ0UmlnaHQ6XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzMjQzXCIsXHRcImhleFwiKSxcclxuXHRcdFx0c2hpZnRMZWZ0Olx0XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzI0NFwiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxVcDpcdFx0XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzU0MVwiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxEb3duOlx0XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzU0MlwiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxSaWdodDpcdFx0QnVmZmVyLmZyb20oXCIxYjViMzEzYjM1NDNcIixcdFwiaGV4XCIpLFxyXG5cdFx0XHRjdHJsTGVmdDpcdFx0QnVmZmVyLmZyb20oXCIxYjViMzEzYjM1NDRcIixcdFwiaGV4XCIpLFxyXG5cdFx0XHRjdHJsU2hpZnRVcDpcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzNjQxXCIsXHRcImhleFwiKSxcclxuXHRcdFx0Y3RybFNoaWZ0RG93bjpcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzNjQyXCIsXHRcImhleFwiKSxcclxuXHRcdFx0Y3RybFNoaWZ0UmlnaHQ6XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzY0M1wiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxTaGlmdExlZnQ6XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzY0NFwiLFx0XCJoZXhcIiksXHJcblx0XHRcdGVudGVyOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMGRcIixcdFx0XHRcImhleFwiKSwgLy8wZCA9IFxcciwgMGEgPSBcXG5cclxuXHRcdFx0YWx0RW50ZXI6XHRcdEJ1ZmZlci5mcm9tKFwiMWIwZFwiLFx0XHRcdFwiaGV4XCIpLCAvLytjdHJsQWx0RW50ZXIgK3NoaWZ0QWx0RW50ZXJcclxuXHRcdFx0YmFjazpcdFx0XHRCdWZmZXIuZnJvbShcIjA4XCIsXHRcdFx0XCJoZXhcIiksIC8vK2N0cmxIXHJcblx0XHRcdGRlbDpcdFx0XHRCdWZmZXIuZnJvbShcIjFiNWIzMzdlXCIsXHRcdFwiaGV4XCIpLFxyXG5cdFx0XHR0YWI6XHRcdFx0QnVmZmVyLmZyb20oXCIwOVwiLFx0XHRcdFwiaGV4XCIpLFxyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0Y29uc3RydWN0b3IocHJvdGVjdGVkIGNmZzogUkdMQ2ZnKSB7XHJcblx0XHRcdHN1cGVyKCk7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLmNmZyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCBSR0wuZGVmYXVsdHMpLCBjZmcpO1xyXG5cdFx0XHRcclxuXHRcdFx0YXNzZXJ0Lm9rKHRoaXMuY2ZnLm5hbWUsIFwiUkdMICduYW1lJyBtdXN0IGJlIHByb3ZpZGVkIGluIHRoZSBjb25maWdcIik7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLmNmZy5tYWluXHRcdD0gXCIuL1wiICsgcGF0aC53aW4zMi5ub3JtYWxpemUodGhpcy5jZmcubWFpbiB8fCBcIi4vbWFpbi5qc1wiKTtcclxuXHRcdFx0dGhpcy5jZmcubWFwcGluZ3NcdD0gXCIuL1wiICsgcGF0aC53aW4zMi5ub3JtYWxpemUodGhpcy5jZmcubWFwcGluZ3MgfHwgXCIuL21hcHBpbmdzLmpzXCIpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly9wcm9jZXNzLnN0ZG91dC53cml0ZShgXFx4MWJdMDske3RoaXMuY2ZnLm5hbWV9XFxhYCk7XHJcblx0XHRcdHByb2Nlc3MudGl0bGUgPSB0aGlzLmNmZy5uYW1lIHx8IHByb2Nlc3MudGl0bGUgfHwgXCJSR0xcIjtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMucGFyc2VNYXBwaW5ncygpO1xyXG5cdFx0fSAvL2N0b3JcclxuXHRcdFxyXG5cdFx0Z2V0IGRpbWVucygpOiBbbnVtYmVyLCBudW1iZXJdIHwgWzAsIDBdIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuc291dD8uZ2V0V2luZG93U2l6ZSgpIHx8IFswLCAwXTtcclxuXHRcdH0gLy9nLWRpbWVuc1xyXG5cdFx0Z2V0IGNEcHQoKTogbnVtYmVyIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuY29sb3JEZXB0aCgpO1xyXG5cdFx0fSAvL2ctY0RwdFxyXG5cdFx0Z2V0IHNlcnIoKTogdHR5LldyaXRlU3RyZWFtIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2JvdW5kLnNlcnIgfHwgdGhpcy5fYm91bmQuc291dCB8fCBwcm9jZXNzLnN0ZGVycjtcclxuXHRcdH0gLy9nLXNlcnJcclxuXHRcdGdldCBzb3V0KCk6IHR0eS5Xcml0ZVN0cmVhbSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9ib3VuZC5zb3V0IHx8IHByb2Nlc3Muc3Rkb3V0O1xyXG5cdFx0fSAvL2ctc291dFxyXG5cdFx0Z2V0IHNpbigpOiB0dHkuUmVhZFN0cmVhbSB7XHJcblx0XHRcdHJldHVybiB0aGlzLl9ib3VuZC5zaW4gfHwgcHJvY2Vzcy5zdGRpbjtcclxuXHRcdH0gLy9nLXNpblxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFBhcnNlIE1hcHBpbmdzIGZyb20gRmlsZVxyXG5cdFx0ICovXHJcblx0XHRwYXJzZU1hcHBpbmdzKGZyb206IE51bGxhYmxlPHN0cmluZz4gPSB0aGlzLmNmZy5tYXBwaW5ncyk6IE9iamVjdCB7XHJcblx0XHRcdGFzc2VydC5vayhmcm9tLCBcIidtYXBwaW5ncycgbXVzdCBiZSBhIHZhbGlkIHBhdGhcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRmcm9tID0gcGF0aC53aW4zMi5qb2luKHByb2Nlc3MuY3dkKCksIGZyb20pO1xyXG5cdFx0XHRcclxuXHRcdFx0ZGVsZXRlIHJlcXVpcmUuY2FjaGVbZnJvbV07XHJcblx0XHRcdFxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdHJldHVybiByZ2xtLlJHTE0uUkdMTUNodW5rLm1hcHBpbmdzID0gcmVxdWlyZShmcm9tKTtcclxuXHRcdFx0fSBjYXRjaChlKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJnbG0uUkdMTS5SR0xNQ2h1bmsubWFwcGluZ3MgPSByZXF1aXJlKHBhdGguam9pbihfX2Rpcm5hbWUsIFwiLi4vLi4vbWFwcGluZ3MuanNcIikpO1xyXG5cdFx0XHR9XHJcblx0XHR9IC8vcGFyc2VNYXBwaW5nc1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIENhcHR1cmUga2V5cyBmcm9tIFNJTlxyXG5cdFx0ICovXHJcblx0XHRjYXB0dXJlKHdoaWNoOiB0dHkuUmVhZFN0cmVhbSA9IHRoaXMuc2luLCBiaW5kID0gdHJ1ZSwgb3V0OiB0dHkuV3JpdGVTdHJlYW0gPSB0aGlzLnNvdXQsIGVycjogdHR5LldyaXRlU3RyZWFtID0gdGhpcy5zZXJyKTogYm9vbGVhbiB7XHJcblx0XHRcdGFzc2VydC5vayh3aGljaC5pc1RUWSAmJiBvdXQuaXNUVFkgJiYgZXJyLmlzVFRZLCBcIlN0cmVhbSBtdXN0IGJlIFRUWVwiKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmICgod2hpY2guaXNSYXcgJiYgIWJpbmQpIHx8ICghd2hpY2guaXNSYXcgJiYgYmluZCkpIHdoaWNoLnNldFJhd01vZGUoYmluZCk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAodGhpcy5fYm91bmQuc2luYmluZCAmJiB0aGlzLl9ib3VuZC5zaW4pIHtcclxuXHRcdFx0XHR0aGlzLnNpbi5yZW1vdmVMaXN0ZW5lcihcImRhdGFcIiwgdGhpcy5fYm91bmQuc2luYmluZCEpO1xyXG5cdFx0XHRcdHRoaXMuX2JvdW5kLnNpbmJpbmQgPSBudWxsO1xyXG5cdFx0XHRcdHRoaXMuc2Vyci53cml0ZShyZ2wubW91c2VPZmYpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAod2hpY2guaXNSYXcpIHtcclxuXHRcdFx0XHR3aGljaC5vbihcImRhdGFcIiwgdGhpcy5fYm91bmQuc2luYmluZCA9IChrZXk6IEJ1ZmZlcikgPT4ge1xyXG5cdFx0XHRcdFx0dGhpcy5lbWl0KFwicmF3a2V5XCIsIGtleSwga2V5Lmxlbmd0aCA+IDEgJiYga2V5WzBdID09IDB4MWIsIGtleS5sZW5ndGggPiAxID8ga2V5LnNsaWNlKDEpIDoga2V5LnNsaWNlKDApKTtcclxuXHRcdFx0XHRcdHRoaXMuZW1pdChcInJhd2N0cmxrZXlcIiwga2V5LCBCdWZmZXIuZnJvbShbKEFycmF5LmZyb20oa2V5LnZhbHVlcygpKS5wb3AoKSA/PyAwKSArIDB4NjEgLSAxXSksIGtleS5sZW5ndGggPiAxICYmIGtleVswXSA9PSAweDFiLCBrZXkubGVuZ3RoID4gMSA/IGtleS5zbGljZSgxKSA6IGtleS5zbGljZSgwKSk7XHJcblx0XHRcdFx0XHR0aGlzLmVtaXQoXCJrZXlcIiwga2V5LnRvU3RyaW5nKFwidXRmOFwiKSwga2V5Lmxlbmd0aCA+IDEgJiYga2V5WzBdID09IDB4MWIsIChrZXkubGVuZ3RoID4gMSA/IGtleS5zbGljZSgxKSA6IGtleS5zbGljZSgwKSkudG9TdHJpbmcoXCJ1dGY4XCIpKTtcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5fYm91bmQuc2luID0gd2hpY2g7XHJcblx0XHRcdHRoaXMuX2JvdW5kLnNvdXQgPSBvdXQ7XHJcblx0XHRcdHRoaXMuX2JvdW5kLnNlcnIgPSBlcnI7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLnNlcnIud3JpdGUocmdsLm1vdXNlT24pO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5lbWl0KFwiZGVidWdcIiwgYFRUWSBzZXQgdG8gJHtiaW5kfWApO1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIHdoaWNoLmlzUmF3O1xyXG5cdFx0fSAvL2NhcHR1cmVcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBMb2FkIHBhY2thZ2UgQ29uZmlnIGZyb20gRmlsZVxyXG5cdFx0ICovXHJcblx0XHRzdGF0aWMgYXN5bmMgbG9hZChmcm9tOiBzdHJpbmcgfCBSR0xDZmcgPSBcIi4vcGFja2FnZS5qc29uXCIpOiBQcm9taXNlPFJHTD4ge1xyXG5cdFx0XHRpZiAodHlwZW9mIGZyb20gPT0gXCJzdHJpbmdcIikge1xyXG5cdFx0XHRcdGZyb20gPSBwYXRoLndpbjMyLnJlc29sdmUoZnJvbSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0bGV0IG91dDogUkdMID0gbmV3IFJHTChhd2FpdCBmcy5yZWFkSlNPTihmcm9tLCB7XHJcblx0XHRcdFx0XHRlbmNvZGluZzogXCJhc2NpaVwiLFxyXG5cdFx0XHRcdFx0ZmxhZzogXCJyXCJcclxuXHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0b3V0LiNfbG9hZGVkRnJvbSA9IGZyb207XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmV0dXJuIG91dDtcclxuXHRcdFx0fSBlbHNlIHJldHVybiBuZXcgUkdMKGZyb20pO1xyXG5cdFx0fSAvL2xvYWRcclxuXHRcdC8qKlxyXG5cdFx0ICogU3RvcmUgcGFja2FnZSBDb25maWcgdG8gRmlsZVxyXG5cdFx0ICovXHJcblx0XHRhc3luYyBzdG9yZSh0bzogc3RyaW5nID0gdGhpcy4jX2xvYWRlZEZyb20gfHwgXCIuL3BhY2thZ2UuanNvblwiLCByZXBsPzogKCh0aGlzOiBhbnksIGtleTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKSA9PiBhbnkpLCBwYWQ6IG51bWJlciA9IDIpOiBQcm9taXNlPGFueT4ge1xyXG5cdFx0XHRhc3NlcnQub2sodG8gJiYgdHlwZW9mIHRvID09IFwic3RyaW5nXCIsIFwiJ2NvbmZpZycgbXVzdCBiZSBhIHZhbGlkIHBhdGhcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gYXdhaXQgZnMud3JpdGVKU09OKHRvLCB0aGlzLmNmZywge1xyXG5cdFx0XHRcdEVPTDogb3MuRU9MLFxyXG5cdFx0XHRcdGVuY29kaW5nOiBcImFzY2lpXCIsXHJcblx0XHRcdFx0bW9kZTogMG83NzUsXHJcblx0XHRcdFx0c3BhY2VzOiBwYWQsXHJcblx0XHRcdFx0cmVwbGFjZXI6IHJlcGwsXHJcblx0XHRcdFx0ZmxhZzogXCJ3XCJcclxuXHRcdFx0fSk7XHJcblx0XHR9IC8vc3RvcmVcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBMYXVuY2ggcGFja2FnZSBlbnRyeVxyXG5cdFx0ICovXHJcblx0XHRleGVjKGZyb206IE51bGxhYmxlPHN0cmluZz4gPSB0aGlzLmNmZy5tYWluIHx8IFwiLi9tYWluLmpzXCIpOiBhbnl7XHJcblx0XHRcdGFzc2VydC5vayhmcm9tLCBcIidtYWluJyBtdXN0IGJlIGEgdmFsaWQgcGF0aFwiKTtcclxuXHRcdFx0XHJcblx0XHRcdGZyb20gPSBwYXRoLndpbjMyLmpvaW4ocHJvY2Vzcy5jd2QoKSwgZnJvbSk7XHJcblx0XHRcdFxyXG5cdFx0XHRkZWxldGUgcmVxdWlyZS5jYWNoZVtmcm9tXTtcclxuXHRcdFx0XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlcXVpcmUoZnJvbSkodGhpcywgbW9kdWxlKTtcclxuXHRcdFx0fSBjYXRjaChlKSB7XHJcblx0XHRcdFx0cmV0dXJuIHJlcXVpcmUocGF0aC53aW4zMi5qb2luKHByb2Nlc3MuY3dkKCksIFwiLi9tYWluLmpzXCIpKSh0aGlzLCBtb2R1bGUpO1xyXG5cdFx0XHR9XHJcblx0XHR9IC8vZXhlY1xyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIFdyaXRlLWFuZC1jb3VudCB0byBTT1VUXHJcblx0XHQgKi9cclxuXHRcdHdyaXRlKGQ6IHN0cmluZyB8IFVpbnQ4QXJyYXkgfCBCdWZmZXIgPSBcIlwiLCAuLi5kYXRhOiAoc3RyaW5nIHwgVWludDhBcnJheSlbXSk6IGJvb2xlYW4ge1xyXG5cdFx0XHRpZiAoZCBpbnN0YW5jZW9mIEJ1ZmZlcikgZCA9IGQudG9TdHJpbmcoXCJhc2NpaVwiKTtcclxuXHRcdFx0ZWxzZSBpZiAoZCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIGQgPSBkLmpvaW4oJycpO1xyXG5cdFx0XHRcclxuXHRcdFx0ZCA9IGQudG9TdHJpbmcoKS5yZXBsYWNlQWxsKCdcXHQnLCAnICcucmVwZWF0KDQpKS5yZXBsYWNlQWxsKC8oKD88IVxccilcXG4oPyFcXHIpfCg/PCFcXG4pXFxyKD8hXFxuKXxcXHJcXG58XFxuXFxyKS9nbWlzLCAnXFxuJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRjb25zdCBjaHM6IHN0cmluZ1tdID0gZC5zcGxpdCgnXFxuJyksXHJcblx0XHRcdFx0bGVuOiBudW1iZXIgPSBjaHMubGVuZ3RoIC0gMTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChsZW4gPj0gMSkgdGhpcy5jdXJzb3JbMF0gPSBjaHNbbGVuXS5sZW5ndGg7XHJcblx0XHRcdGVsc2UgdGhpcy5jdXJzb3JbMF0gKz0gY2hzW2xlbl0ubGVuZ3RoO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5jdXJzb3JbMF0gJT0gdGhpcy5zb3V0LmNvbHVtbnM7XHJcblx0XHRcdHRoaXMuY3Vyc29yWzFdID0gTWF0aC5taW4odGhpcy5jdXJzb3JbMV0gKyBsZW4sIHRoaXMuc291dC5yb3dzKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IG91dDogYm9vbGVhbiA9IHRoaXMuc291dC53cml0ZShkKTtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuZW1pdChcIndyaXRlXCIsIGQpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFvdXQpIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gdGhpcy5zb3V0LnVuY29yaygpKTtcclxuXHRcdFx0XHJcblx0XHRcdGRhdGEuZm9yRWFjaChkdCA9PiB0aGlzLndyaXRlKGR0KSk7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gb3V0O1xyXG5cdFx0fSAvL3dyaXRlXHJcblx0XHQvKipcclxuXHRcdCAqIFdyaXRlLWFuZC1jb3VudC1uZXdsaW5lIHRvIFNPVVRcclxuXHRcdCAqL1xyXG5cdFx0d3JpdGVFKC4uLmRhdGE6IChzdHJpbmcgfCBVaW50OEFycmF5IHwgQnVmZmVyKVtdKTogYm9vbGVhbiB7XHJcblx0XHRcdHJldHVybiB0aGlzLndyaXRlKGRhdGEuc2hpZnQoKSEsIC4uLmRhdGEsIG9zLkVPTCk7XHJcblx0XHR9IC8vd3JpdGVFXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogR2V0IFRUWSBjb2xvciBkZXB0aFxyXG5cdFx0ICovXHJcblx0XHRjb2xvckRlcHRoKGVudjogTm9kZUpTLlByb2Nlc3NFbnYgPSBwcm9jZXNzLmVudik6IG51bWJlciB7XHJcblx0XHRcdHJldHVybiB0aGlzLnNvdXQuZ2V0Q29sb3JEZXB0aChlbnYpO1xyXG5cdFx0fSAvL2NvbG9yRGVwdGhcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBNb3ZlLWFuZC1jb3VudCBTT1VUIGN1cnNvclxyXG5cdFx0ICovXHJcblx0XHRhc3luYyBtb3ZlKHg6IG51bWJlciwgeT86IG51bWJlciwgcmVsOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdFx0aWYgKCFyZWwpIHggPSBNYXRoLm1pbihNYXRoLm1heCh4LCAwKSwgdGhpcy5kaW1lbnNbMF0pO1xyXG5cdFx0XHRlbHNlIHggPSBNYXRoLm1pbihNYXRoLm1heCh4LCAtdGhpcy5kaW1lbnNbMF0pLCB0aGlzLmRpbWVuc1swXSk7XHJcblx0XHRcdGlmICghcmVsICYmIHkpIHkgPSBNYXRoLm1pbihNYXRoLm1heCh5LCAwKSwgdGhpcy5kaW1lbnNbMV0pO1xyXG5cdFx0XHRlbHNlIGlmIChyZWwgJiYgeSkgeSA9IE1hdGgubWluKE1hdGgubWF4KHksIC10aGlzLmRpbWVuc1sxXSksIHRoaXMuZGltZW5zWzFdKTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuXHRcdFx0XHRsZXQgZGF0YTogYm9vbGVhbjtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLmVtaXQoXCJtb3ZlXCIsIHgsIHksIHJlbCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCFyZWwpIHtcclxuXHRcdFx0XHRcdHRoaXMuY3Vyc29yWzBdID0geDtcclxuXHRcdFx0XHRcdHRoaXMuY3Vyc29yWzFdID0geSA/PyB0aGlzLmN1cnNvclsxXTtcclxuXHRcdFx0XHRcdGRhdGEgPSByZWFkbGluZS5jdXJzb3JUbyh0aGlzLnNvdXQsIHgsIHksICgpID0+IHJlcyhkYXRhKSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmICh4KSB0aGlzLmN1cnNvclswXSArPSB4O1xyXG5cdFx0XHRcdFx0aWYgKHkpIHRoaXMuY3Vyc29yWzFdICs9IHk7XHJcblx0XHRcdFx0XHRkYXRhID0gcmVhZGxpbmUubW92ZUN1cnNvcih0aGlzLnNvdXQsIHgsIHkgPz8gMCwgKCkgPT4gcmVzKGRhdGEpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSAvL21vdmVcclxuXHRcdC8qKlxyXG5cdFx0ICogQ2xlYXItYW5kLXJlc3RvcmUgU09VVFxyXG5cdFx0ICovXHJcblx0XHRhc3luYyBjbGVhcihsaW5lcz86IG51bWJlcltdIHwgbnVtYmVyLCBkaXI6IHR0eS5EaXJlY3Rpb24gPSAwLCByZWw/OiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzLCByZWopID0+IHtcclxuXHRcdFx0XHRjb25zdCBzYXY6IFtudW1iZXIsIG51bWJlcl0gPSBbLi4udGhpcy5jdXJzb3JdO1xyXG5cdFx0XHRcdGxldCBvdXQ6IGJvb2xlYW4gPSB0cnVlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghbGluZXMpIHtcclxuXHRcdFx0XHRcdHRoaXMubW92ZSgwLCAwLCByZWwpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRvdXQgPSByZWFkbGluZS5jbGVhclNjcmVlbkRvd24odGhpcy5zb3V0LCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5tb3ZlKC4uLnNhdiwgZmFsc2UpLnRoZW4oKCkgPT4gcmVzKG91dCkpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGxpbmVzID09IFwibnVtYmVyXCIgJiYgbGluZXMgPCAwKVxyXG5cdFx0XHRcdFx0b3V0ID0gcmVhZGxpbmUuY2xlYXJMaW5lKHRoaXMuc291dCwgZGlyLCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMubW92ZSguLi5zYXYsIGZhbHNlKS50aGVuKCgpID0+IHJlcyhvdXQpKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGVsc2UgaWYgKHR5cGVvZiBsaW5lcyA9PSBcIm51bWJlclwiKSB7XHJcblx0XHRcdFx0XHR0aGlzLm1vdmUoMCwgbGluZXMsIHJlbCkudGhlbigoKSA9PiB7XHJcblx0XHRcdFx0XHRcdG91dCA9IHJlYWRsaW5lLmNsZWFyTGluZSh0aGlzLnNvdXQsIGRpciwgKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRcdHRoaXMubW92ZSguLi5zYXYsIGZhbHNlKS50aGVuKCgpID0+IHJlcyhvdXQpKTtcclxuXHRcdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9IGVsc2VcclxuXHRcdFx0XHRcdHJldHVybiBQcm9taXNlLmFsbChsaW5lcy5tYXAobCA9PiB0aGlzLmNsZWFyKGwsIGRpciwgcmVsKSkpLnRoZW4oYnMgPT4gcmVzKGJzLmV2ZXJ5KGIgPT4gYikpLCByZWopO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHRoaXMuZW1pdChcImNsZWFyXCIsIGxpbmVzLCBkaXIsIHJlbCwgb3V0KTtcclxuXHRcdFx0fSk7XHJcblx0XHR9IC8vY2xlYXJcclxuXHRcdFxyXG5cdFx0b25jZShldmVudG5hbWU6IFwibG9nXCIsIGxpc3RlbmVyOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b25jZShldmVudG5hbWU6IFwiZGVidWdcIiwgbGlzdGVuZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHRoaXM7XHJcblx0XHRvbmNlKGV2ZW50bmFtZTogXCJjbGVhclwiLCBsaXN0ZW5lcjogKGxpbmVzOiBudW1iZXIsIGRpcjogdHR5LkRpcmVjdGlvbiwgcmVsOiBib29sZWFuLCBvdXQ6IGJvb2xlYW4pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b25jZShldmVudG5hbWU6IFwid3JpdGVcIiwgbGlzdGVuZXI6IChkOiBzdHJpbmcgfCBVaW50OEFycmF5KSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uY2UoZXZlbnRuYW1lOiBcIm1vdmVcIiwgbGlzdGVuZXI6ICh4OiBudW1iZXIsIHk6IG51bWJlciwgcmVsOiBib29sZWFuKSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uY2UoZXZlbnRuYW1lOiBcImtleVwiLCBsaXN0ZW5lcjogKGtleTogc3RyaW5nLCBpc2FsdDogYm9vbGVhbiwgczogc3RyaW5nKSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uY2UoZXZlbnRuYW1lOiBcInJhd2tleVwiLCBsaXN0ZW5lcjogKGtleTogQnVmZmVyLCBpc2FsdDogYm9vbGVhbiwgczogQnVmZmVyKSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uY2UoZXZlbnRuYW1lOiBcInJhd2N0cmxrZXlcIiwgbGlzdGVuZXI6IChrZXk6IEJ1ZmZlciwgY3RybGtleTogQnVmZmVyLCBpc2FsdDogYm9vbGVhbiwgczogQnVmZmVyKSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uY2UoZXZlbnRuYW1lOiBzdHJpbmcgfCBzeW1ib2wsIGxpc3RlbmVyOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b25jZShldmVudG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgbGlzdGVuZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHRoaXMge1xyXG5cdFx0XHRyZXR1cm4gc3VwZXIub24oZXZlbnRuYW1lLCBsaXN0ZW5lcik7XHJcblx0XHR9IC8vb25jZVxyXG5cdFx0b24oZXZlbnRuYW1lOiBcImxvZ1wiLCBsaXN0ZW5lcjogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uKGV2ZW50bmFtZTogXCJkZWJ1Z1wiLCBsaXN0ZW5lcjogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uKGV2ZW50bmFtZTogXCJjbGVhclwiLCBsaXN0ZW5lcjogKGxpbmVzOiBudW1iZXIsIGRpcjogdHR5LkRpcmVjdGlvbiwgcmVsOiBib29sZWFuLCBvdXQ6IGJvb2xlYW4pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b24oZXZlbnRuYW1lOiBcIndyaXRlXCIsIGxpc3RlbmVyOiAoZDogc3RyaW5nIHwgVWludDhBcnJheSkgPT4gdm9pZCk6IHRoaXM7XHJcblx0XHRvbihldmVudG5hbWU6IFwibW92ZVwiLCBsaXN0ZW5lcjogKHg6IG51bWJlciwgeTogbnVtYmVyLCByZWw6IGJvb2xlYW4pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b24oZXZlbnRuYW1lOiBcImtleVwiLCBsaXN0ZW5lcjogKGtleTogc3RyaW5nLCBpc2FsdDogYm9vbGVhbiwgczogc3RyaW5nKSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uKGV2ZW50bmFtZTogXCJyYXdrZXlcIiwgbGlzdGVuZXI6IChrZXk6IEJ1ZmZlciwgaXNhbHQ6IGJvb2xlYW4sIHM6IEJ1ZmZlcikgPT4gdm9pZCk6IHRoaXM7XHJcblx0XHRvbihldmVudG5hbWU6IFwicmF3Y3RybGtleVwiLCBsaXN0ZW5lcjogKGtleTogQnVmZmVyLCBjdHJsa2V5OiBCdWZmZXIsIGlzYWx0OiBib29sZWFuLCBzOiBCdWZmZXIpID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b24oZXZlbnRuYW1lOiBzdHJpbmcgfCBzeW1ib2wsIGxpc3RlbmVyOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b24oZXZlbnRuYW1lOiBzdHJpbmcgfCBzeW1ib2wsIGxpc3RlbmVyOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB0aGlzIHtcclxuXHRcdFx0cmV0dXJuIHN1cGVyLm9uKGV2ZW50bmFtZSwgbGlzdGVuZXIpO1xyXG5cdFx0fSAvL29uXHJcblx0XHRlbWl0KGV2ZW50bmFtZTogXCJsb2dcIiwgLi4uYXJnczogYW55W10pOiBhbnk7XHJcblx0XHRlbWl0KGV2ZW50bmFtZTogXCJkZWJ1Z1wiLCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBcImNsZWFyXCIsIGxpbmVzOiBudW1iZXIsIGRpcjogdHR5LkRpcmVjdGlvbiwgcmVsOiBib29sZWFuLCBvdXQ6IGJvb2xlYW4pOiBhbnk7XHJcblx0XHRlbWl0KGV2ZW50bmFtZTogXCJ3cml0ZVwiLCBkOiBzdHJpbmcgfCBVaW50OEFycmF5KTogc3RyaW5nO1xyXG5cdFx0ZW1pdChldmVudG5hbWU6IFwibW92ZVwiLCB4OiBudW1iZXIsIHk6IG51bWJlciwgcmVsOiBib29sZWFuKTogYm9vbGVhbjtcclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBcImtleVwiLCBrZXk6IHN0cmluZywgaXNhbHQ6IGJvb2xlYW4sIHM6IHN0cmluZyk6IHN0cmluZztcclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBcInJhd2tleVwiLCBrZXk6IEJ1ZmZlciwgaXNhbHQ6IGJvb2xlYW4sIHM6IEJ1ZmZlcik6IEJ1ZmZlcjtcclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBcInJhd2N0cmxrZXlcIiwga2V5OiBCdWZmZXIsIGN0cmxrZXk6IEJ1ZmZlciwgaXNhbHQ6IGJvb2xlYW4sIHM6IEJ1ZmZlcik6IEJ1ZmZlcjtcclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBzdHJpbmcgfCBzeW1ib2wsIC4uLmFyZ3M6IGFueVtdKTogYm9vbGVhbjtcclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBzdHJpbmcgfCBzeW1ib2wsIC4uLmFyZ3M6IGFueVtdKTogYW55IHtcclxuXHRcdFx0cmV0dXJuIHN1cGVyLmVtaXQoZXZlbnRuYW1lLCAuLi5hcmdzKTtcclxuXHRcdH0gLy9lbWl0XHJcblx0XHRcclxuXHR9IC8vUkdMXHJcblx0XHJcbn0gLy9yZ2xcclxuXHJcbmV4cG9ydCB7IHJnbG0gfTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHJnbDtcclxuIl19