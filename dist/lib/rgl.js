/// <reference path="./RGLM.ts">
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.rglm = exports.rgl = void 0;
const tslib_1 = require("tslib");
const assert = tslib_1.__importStar(require("assert"));
const event = tslib_1.__importStar(require("events"));
const readline = tslib_1.__importStar(require("readline"));
const fs = tslib_1.__importStar(require("fs-extra"));
const os = tslib_1.__importStar(require("os"));
const path = tslib_1.__importStar(require("path"));
const rglm = tslib_1.__importStar(require("./RGLM"));
exports.rglm = rglm;
const util = tslib_1.__importStar(require("util"));
var rgl;
(function (rgl) {
    const dbg = util.debuglog("RGL");
    dbg(`ins ${__dirname}`);
    rgl.scrollUp = (by = 1) => `\x1b[${by}S`, rgl.scrollDown = (by = 1) => `\x1b[${by}T`, rgl.save = `\x1b7\x1b[s`, rgl.restore = `\x1b8\x1b[u`, rgl.mouseOn = `\x1b[1z\x1b[?1000;1003;1005h`, rgl.mouseOff = `\x1b[0z\x1b[?1000;1003;1005;1006;1015l`;
    /**
     * Main packaging Class
     */
    class RGL extends event.EventEmitter {
        cfg;
        /**
         * TTY streams bound to app
         */
        _bound = {
            sin: process.stdin,
            sout: process.stdout,
            serr: process.stderr,
            sinbind: null,
        };
        /**
         * SOUT cursor state
         */
        cursor = [0, 0];
        /**
         * Source of package Config in case of fs load
         */
        #_loadedFrom = "";
        static defaults = {
            description: "",
            main: "./main.js",
            version: "0.1",
            mappings: "./mappings.js",
            name: process.title,
            keywords: [],
            "$schema": path.join(__dirname, "../../rglcfg.schema.json")
        };
        /**
         * Special keys for convenience
         */
        static special_keys = {
            ctrlC: Buffer.from("03", "hex"),
            ctrlV: Buffer.from("16", "hex"),
            ctrlZ: Buffer.from("1a", "hex"),
            ctrlY: Buffer.from("19", "hex"),
            up: Buffer.from("1b5b41", "hex"),
            down: Buffer.from("1b5b42", "hex"),
            right: Buffer.from("1b5b43", "hex"),
            left: Buffer.from("1b5b44", "hex"),
            shiftUp: Buffer.from("1b5b313b3241", "hex"),
            shiftDown: Buffer.from("1b5b313b3242", "hex"),
            shiftRight: Buffer.from("1b5b313b3243", "hex"),
            shiftLeft: Buffer.from("1b5b313b3244", "hex"),
            ctrlUp: Buffer.from("1b5b313b3541", "hex"),
            ctrlDown: Buffer.from("1b5b313b3542", "hex"),
            ctrlRight: Buffer.from("1b5b313b3543", "hex"),
            ctrlLeft: Buffer.from("1b5b313b3544", "hex"),
            fnUp: Buffer.from("1b5b357e", "hex"),
            fnDown: Buffer.from("1b5b367e", "hex"),
            fnRight: Buffer.from("1b5b347e", "hex"),
            fnLeft: Buffer.from("1b5b317e", "hex"),
            ctrlShiftUp: Buffer.from("1b5b313b3641", "hex"),
            ctrlShiftDown: Buffer.from("1b5b313b3642", "hex"),
            ctrlShiftRight: Buffer.from("1b5b313b3643", "hex"),
            ctrlShiftLeft: Buffer.from("1b5b313b3644", "hex"),
            ctrlFnUp: Buffer.from("1b5b353b357e", "hex"),
            ctrlFnDown: Buffer.from("1b5b363b357e", "hex"),
            ctrlFnRight: Buffer.from("1b5b343b357e", "hex"),
            ctrlFnLeft: Buffer.from("1b5b313b357e", "hex"),
            enter: Buffer.from("0d", "hex"),
            altEnter: Buffer.from("1b0d", "hex"),
            back: Buffer.from("08", "hex"),
            del: Buffer.from("1b5b337e", "hex"),
            tab: Buffer.from("09", "hex"),
        };
        constructor(cfg) {
            super();
            this.cfg = cfg;
            this.cfg = Object.assign(Object.assign(Object.create(null), RGL.defaults), cfg);
            assert.ok(this.cfg.name, "RGL 'name' must be provided in the config");
            this.cfg.main = "./" + path.normalize(this.cfg.main || RGL.defaults.main);
            this.cfg.mappings = "./" + path.normalize(this.cfg.mappings || RGL.defaults.mappings || "./mappings.js");
            //process.stdout.write(`\x1b]0;${this.cfg.name}\a`);
            process.title = this.cfg.name || process.title || "RGL";
            this.parseMappings();
        } //ctor
        get dimens() {
            return this.sout?.getWindowSize() || [0, 0];
        } //g-dimens
        get cDpt() {
            return this.colorDepth();
        } //g-cDpt
        get serr() {
            return this._bound.serr || this._bound.sout || process.stderr;
        } //g-serr
        get sout() {
            return this._bound.sout || process.stdout;
        } //g-sout
        get sin() {
            return this._bound.sin || process.stdin;
        } //g-sin
        /**
         * Parse Mappings from File
         */
        parseMappings(from = this.cfg.mappings) {
            assert.ok(from, "'mappings' must be a valid path");
            from = path.join(process.cwd(), from);
            delete require.cache[from];
            try {
                return rglm.RGLM.RGLMChunk.mappings = require(from);
            }
            catch (e) {
                return rglm.RGLM.RGLMChunk.mappings = require(this.cfg.mappings = path.join(__dirname, "../../mappings.js"));
            }
        } //parseMappings
        /**
         * Capture keys from SIN
         */
        capture(which = this.sin, bind = true, out = this.sout, err = this.serr) {
            assert.ok(which.isTTY && out.isTTY && err.isTTY, "Stream must be TTY");
            if ((which.isRaw && !bind) || (!which.isRaw && bind))
                which.setRawMode(bind);
            if (this._bound.sinbind && this._bound.sin) {
                this.sin.removeListener("data", this._bound.sinbind);
                this._bound.sinbind = null;
                this.serr.write(rgl.mouseOff);
            }
            if (which.isRaw) {
                which.on("data", this._bound.sinbind = (key) => {
                    this.emit("rawkey", key);
                    this.emit("rawctrlkey", key);
                    this.emit("key", key.toString("utf8"));
                });
            }
            this._bound.sin = which;
            this._bound.sout = out;
            this._bound.serr = err;
            this.serr.write(rgl.mouseOn);
            this.emit("debug", `TTY set to ${bind}`);
            return which.isRaw;
        } //capture
        /**
         * Load package Config from File
         */
        static async load(from) {
            if (typeof from != "object") {
                let out;
                if (from) {
                    out = new RGL(await fs.readJSON(from, {
                        encoding: "ascii",
                        flag: "r"
                    }));
                }
                else {
                    try {
                        out = new RGL(await fs.readJSON(from = "./rglcfg.json", {
                            encoding: "ascii",
                            flag: "r"
                        }));
                    }
                    catch (e) {
                        out = new RGL(await fs.readJSON(from = "package.json", {
                            encoding: "ascii",
                            flag: "r"
                        }));
                    }
                }
                out.#_loadedFrom = path.resolve(from);
                return out;
            }
            else
                return new RGL(from);
        } //load
        /**
         * Store package Config to File
         */
        async store(to = this.#_loadedFrom || "./rglcfg.json", repl, pad = 2) {
            assert.ok(to && typeof to == "string", "'config' must be a valid path");
            return await fs.writeJSON(to, this.cfg, {
                EOL: os.EOL,
                encoding: "ascii",
                mode: 0o775,
                spaces: pad,
                replacer: repl,
                flag: "w"
            });
        } //store
        /**
         * Launch package entry
         */
        exec(from = this.cfg.main || "./main.js", ...data) {
            assert.ok(from, "'main' must be a valid path");
            from = path.join(process.cwd(), from);
            delete require.cache[from];
            try {
                return require(from)(this, module, ...data);
            }
            catch (e) {
                return require(this.cfg.main = path.join(process.cwd(), "./main.js"))(this, module, ...data);
            }
        } //exec
        /**
         * Write-and-count to SOUT
         */
        write(d = "", ...data) {
            if (d instanceof Buffer)
                d = d.toString("ascii");
            else if (d instanceof Uint8Array)
                d = d.join('');
            d = d.toString().replaceAll('\t', ' '.repeat(4)).replaceAll(/((?<!\r)\n(?!\r)|(?<!\n)\r(?!\n)|\r\n|\n\r)/gmis, '\n');
            const chs = d.split('\n'), len = chs.length - 1;
            d = d.replaceAll('\n', os.EOL);
            if (len >= 1)
                this.cursor[0] = chs[len].length;
            else
                this.cursor[0] += chs[len].length;
            this.cursor[0] %= this.sout.columns;
            this.cursor[1] = Math.min(this.cursor[1] + len, this.sout.rows);
            const out = this.sout.write(d);
            this.emit("write", d);
            if (!out)
                process.nextTick(() => this.sout.uncork());
            data.forEach(dt => this.write(dt));
            return out;
        } //write
        /**
         * Write-and-count-newline to SOUT
         */
        writeE(...data) {
            return this.write(data.shift(), ...data, os.EOL);
        } //writeE
        /**
         * Get TTY color depth
         */
        colorDepth(env = process.env) {
            return this.sout.getColorDepth(env);
        } //colorDepth
        /**
         * Move-and-count SOUT cursor
         */
        async move(x, y, rel = false) {
            if (!rel)
                x = Math.min(Math.max(x, 0), this.dimens[0]);
            else
                x = Math.min(Math.max(x, -this.dimens[0]), this.dimens[0]);
            if (!rel && y)
                y = Math.min(Math.max(y, 0), this.dimens[1]);
            else if (rel && y)
                y = Math.min(Math.max(y, -this.dimens[1]), this.dimens[1]);
            return new Promise((res, rej) => {
                let data;
                this.emit("move", x, y, rel);
                if (!rel) {
                    this.cursor[0] = x;
                    this.cursor[1] = y ?? this.cursor[1];
                    data = readline.cursorTo(this.sout, x, y, () => res(data));
                }
                else {
                    if (x)
                        this.cursor[0] += x;
                    if (y)
                        this.cursor[1] += y;
                    data = readline.moveCursor(this.sout, x, y ?? 0, () => res(data));
                }
            });
        } //move
        /**
         * Clear-and-restore SOUT
         */
        async clear(lines, dir = 0, rel) {
            return new Promise(async (res, rej) => {
                const sav = [...this.cursor];
                let out = true;
                if (!lines) {
                    this.move(0, 0, rel).then(() => {
                        out = readline.clearScreenDown(this.sout, () => {
                            this.move(...sav, false).then(() => res(out));
                        });
                    });
                }
                else if (typeof lines == "number" && lines < 0) {
                    out = readline.clearLine(this.sout, dir, () => {
                        this.move(...sav, false).then(() => res(out));
                    });
                }
                else if (typeof lines == "number") {
                    this.move(0, lines, rel).then(() => {
                        out = readline.clearLine(this.sout, dir, () => {
                            this.move(...sav, false).then(() => res(out));
                        });
                    });
                }
                else if (!lines.length) {
                    out = readline.clearScreenDown(this.sout, () => {
                        this.move(...sav, false).then(() => res(out));
                    });
                }
                else
                    return Promise.all(lines.map(l => this.clear(l, dir, rel))).then(bs => res(bs.every(b => b)), rej);
                this.emit("clear", lines, dir, rel, out);
            });
        } //clear
        once(eventname, listener) {
            return super.once(eventname, listener);
        } //once
        on(eventname, listener) {
            return super.on(eventname, listener);
        } //on
        emit(eventname, ...args) {
            return super.emit(eventname, ...args);
        } //emit
    } //RGL
    rgl.RGL = RGL;
})(rgl = exports.rgl || (exports.rgl = {})); //rgl
exports.default = rgl;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmdsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vbGliL3JnbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQ0FBZ0M7QUFFaEMsWUFBWSxDQUFDOzs7O0FBV2IsdURBQWlDO0FBQ2pDLHNEQUFnQztBQUNoQywyREFBcUM7QUFFckMscURBQStCO0FBQy9CLCtDQUF5QjtBQUN6QixtREFBNkI7QUFDN0IscURBQStCO0FBMmF0QixvQkFBSTtBQTFhYixtREFBNkI7QUFFN0IsSUFBYyxHQUFHLENBc2FoQjtBQXRhRCxXQUFjLEdBQUc7SUFFaEIsTUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUVqQyxHQUFHLENBQUMsT0FBTyxTQUFTLEVBQUUsQ0FBQyxDQUFDO0lBRVgsWUFBUSxHQUFHLENBQUMsS0FBc0IsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxRQUFRLEVBQUUsR0FBRyxFQUNqRSxjQUFVLEdBQUcsQ0FBQyxLQUFzQixDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQ3ZELFFBQUksR0FBRyxhQUFhLEVBQ3BCLFdBQU8sR0FBRyxhQUFhLEVBQ3ZCLFdBQU8sR0FBRyw4QkFBOEIsRUFDeEMsWUFBUSxHQUFHLHdDQUF3QyxDQUFDO0lBZXJEOztPQUVHO0lBQ0gsTUFBYSxHQUFJLFNBQVEsS0FBSyxDQUFDLFlBQVk7UUEyR3ZCO1FBekduQjs7V0FFRztRQUNLLE1BQU0sR0FLVjtZQUNILEdBQUcsRUFBRSxPQUFPLENBQUMsS0FBSztZQUNsQixJQUFJLEVBQUUsT0FBTyxDQUFDLE1BQU07WUFDcEIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1lBQ3BCLE9BQU8sRUFBRSxJQUFJO1NBQ2IsQ0FBQztRQUNGOztXQUVHO1FBQ0gsTUFBTSxHQUFxQixDQUFFLENBQUMsRUFBRSxDQUFDLENBQUUsQ0FBQztRQUNwQzs7V0FFRztRQUNILFlBQVksR0FBVyxFQUFFLENBQUM7UUFFMUIsTUFBTSxDQUFVLFFBQVEsR0FBVztZQUNsQyxXQUFXLEVBQUUsRUFBRTtZQUNmLElBQUksRUFBRSxXQUFXO1lBQ2pCLE9BQU8sRUFBRSxLQUFLO1lBQ2QsUUFBUSxFQUFFLGVBQWU7WUFDekIsSUFBSSxFQUFFLE9BQU8sQ0FBQyxLQUFLO1lBQ25CLFFBQVEsRUFBRSxFQUFHO1lBQ2IsU0FBUyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLDBCQUEwQixDQUFDO1NBQzNELENBQUM7UUFDRjs7V0FFRztRQUNILE1BQU0sQ0FBVSxZQUFZLEdBa0N4QjtZQUNILEtBQUssRUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBSSxLQUFLLENBQUM7WUFDbkMsS0FBSyxFQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFJLEtBQUssQ0FBQztZQUNuQyxLQUFLLEVBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUksS0FBSyxDQUFDO1lBQ25DLEtBQUssRUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBSSxLQUFLLENBQUM7WUFDbkMsRUFBRSxFQUFLLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFHLEtBQUssQ0FBQztZQUNwQyxJQUFJLEVBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUcsS0FBSyxDQUFDO1lBQ3JDLEtBQUssRUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRyxLQUFLLENBQUM7WUFDdEMsSUFBSSxFQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFHLEtBQUssQ0FBQztZQUNyQyxPQUFPLEVBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDO1lBQzVDLFNBQVMsRUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7WUFDOUMsVUFBVSxFQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQztZQUMvQyxTQUFTLEVBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDO1lBQzlDLE1BQU0sRUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7WUFDNUMsUUFBUSxFQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQztZQUM3QyxTQUFTLEVBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDO1lBQzlDLFFBQVEsRUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7WUFDN0MsSUFBSSxFQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFHLEtBQUssQ0FBQztZQUN2QyxNQUFNLEVBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUcsS0FBSyxDQUFDO1lBQ3pDLE9BQU8sRUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRyxLQUFLLENBQUM7WUFDekMsTUFBTSxFQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFHLEtBQUssQ0FBQztZQUN6QyxXQUFXLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDO1lBQy9DLGFBQWEsRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7WUFDakQsY0FBYyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQztZQUNsRCxhQUFhLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDO1lBQ2pELFFBQVEsRUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7WUFDN0MsVUFBVSxFQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsY0FBYyxFQUFFLEtBQUssQ0FBQztZQUMvQyxXQUFXLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsS0FBSyxDQUFDO1lBQy9DLFVBQVUsRUFBRyxNQUFNLENBQUMsSUFBSSxDQUFDLGNBQWMsRUFBRSxLQUFLLENBQUM7WUFDL0MsS0FBSyxFQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFJLEtBQUssQ0FBQztZQUNuQyxRQUFRLEVBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUksS0FBSyxDQUFDO1lBQ3ZDLElBQUksRUFBSSxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksRUFBSSxLQUFLLENBQUM7WUFDbEMsR0FBRyxFQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFHLEtBQUssQ0FBQztZQUN0QyxHQUFHLEVBQUksTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUksS0FBSyxDQUFDO1NBQ2pDLENBQUM7UUFFRixZQUFtQixHQUFvQjtZQUN0QyxLQUFLLEVBQUUsQ0FBQztZQURVLFFBQUcsR0FBSCxHQUFHLENBQWlCO1lBR3RDLElBQUksQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBRWhGLE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsMkNBQTJDLENBQUMsQ0FBQztZQUV0RSxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksR0FBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSyxHQUFHLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzVFLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsUUFBUSxJQUFJLEdBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxJQUFJLGVBQWUsQ0FBQyxDQUFDO1lBRXpHLG9EQUFvRDtZQUNwRCxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLE9BQU8sQ0FBQyxLQUFLLElBQUksS0FBSyxDQUFDO1lBRXhELElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztRQUN0QixDQUFDLENBQUMsTUFBTTtRQUVSLElBQUksTUFBTTtZQUNULE9BQU8sSUFBSSxDQUFDLElBQUksRUFBRSxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM3QyxDQUFDLENBQUMsVUFBVTtRQUNaLElBQUksSUFBSTtZQUNQLE9BQU8sSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQzFCLENBQUMsQ0FBQyxRQUFRO1FBQ1YsSUFBSSxJQUFJO1lBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQy9ELENBQUMsQ0FBQyxRQUFRO1FBQ1YsSUFBSSxJQUFJO1lBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQzNDLENBQUMsQ0FBQyxRQUFRO1FBQ1YsSUFBSSxHQUFHO1lBQ04sT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDLEdBQUcsSUFBSSxPQUFPLENBQUMsS0FBSyxDQUFDO1FBQ3pDLENBQUMsQ0FBQyxPQUFPO1FBRVQ7O1dBRUc7UUFDSCxhQUFhLENBQUMsT0FBeUIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRO1lBQ3ZELE1BQU0sQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLGlDQUFpQyxDQUFDLENBQUM7WUFFbkQsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBRXRDLE9BQU8sT0FBTyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUzQixJQUFJO2dCQUNILE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQzthQUNwRDtZQUFDLE9BQU0sQ0FBQyxFQUFFO2dCQUNWLE9BQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxtQkFBbUIsQ0FBQyxDQUFDLENBQUM7YUFDN0c7UUFDRixDQUFDLENBQUMsZUFBZTtRQUVqQjs7V0FFRztRQUNILE9BQU8sQ0FBQyxRQUF3QixJQUFJLENBQUMsR0FBRyxFQUFFLElBQUksR0FBRyxJQUFJLEVBQUUsTUFBdUIsSUFBSSxDQUFDLElBQUksRUFBRSxNQUF1QixJQUFJLENBQUMsSUFBSTtZQUN4SCxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksR0FBRyxDQUFDLEtBQUssSUFBSSxHQUFHLENBQUMsS0FBSyxFQUFFLG9CQUFvQixDQUFDLENBQUM7WUFFdkUsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssSUFBSSxJQUFJLENBQUM7Z0JBQUUsS0FBSyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUU3RSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFO2dCQUMzQyxJQUFJLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFRLENBQUMsQ0FBQztnQkFDdEQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO2dCQUMzQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7YUFDOUI7WUFFRCxJQUFJLEtBQUssQ0FBQyxLQUFLLEVBQUU7Z0JBQ2hCLEtBQUssQ0FBQyxFQUFFLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLENBQUMsR0FBVyxFQUFFLEVBQUU7b0JBQ3RELElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLEdBQUcsQ0FBQyxDQUFDO29CQUN6QixJQUFJLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxHQUFHLENBQUMsQ0FBQztvQkFDN0IsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO2dCQUN4QyxDQUFDLENBQUMsQ0FBQzthQUNIO1lBRUQsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLEdBQUcsS0FBSyxDQUFDO1lBQ3hCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLEdBQUcsQ0FBQztZQUN2QixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksR0FBRyxHQUFHLENBQUM7WUFFdkIsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBRTdCLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLGNBQWMsSUFBSSxFQUFFLENBQUMsQ0FBQztZQUV6QyxPQUFPLEtBQUssQ0FBQyxLQUFLLENBQUM7UUFDcEIsQ0FBQyxDQUFDLFNBQVM7UUFFWDs7V0FFRztRQUNILE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQStCO1lBQ2hELElBQUksT0FBTyxJQUFJLElBQUksUUFBUSxFQUFFO2dCQUM1QixJQUFJLEdBQVEsQ0FBQztnQkFFYixJQUFJLElBQUksRUFBRTtvQkFDVCxHQUFHLEdBQUcsSUFBSSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDLElBQUksRUFBRTt3QkFDckMsUUFBUSxFQUFFLE9BQU87d0JBQ2pCLElBQUksRUFBRSxHQUFHO3FCQUNULENBQUMsQ0FBQyxDQUFDO2lCQUNKO3FCQUFNO29CQUNOLElBQUk7d0JBQ0gsR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsZUFBZSxFQUFFOzRCQUN2RCxRQUFRLEVBQUUsT0FBTzs0QkFDakIsSUFBSSxFQUFFLEdBQUc7eUJBQ1QsQ0FBQyxDQUFDLENBQUM7cUJBQ0o7b0JBQUMsT0FBTSxDQUFDLEVBQUU7d0JBQ1YsR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEdBQUcsY0FBYyxFQUFFOzRCQUN0RCxRQUFRLEVBQUUsT0FBTzs0QkFDakIsSUFBSSxFQUFFLEdBQUc7eUJBQ1QsQ0FBQyxDQUFDLENBQUM7cUJBQ0o7aUJBQ0Q7Z0JBRUQsR0FBRyxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO2dCQUV0QyxPQUFPLEdBQUcsQ0FBQzthQUNYOztnQkFBTSxPQUFPLElBQUksR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzdCLENBQUMsQ0FBQyxNQUFNO1FBQ1I7O1dBRUc7UUFDSCxLQUFLLENBQUMsS0FBSyxDQUFDLEtBQWEsSUFBSSxDQUFDLFlBQVksSUFBSSxlQUFlLEVBQUUsSUFBdUQsRUFBRSxNQUFjLENBQUM7WUFDdEksTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksT0FBTyxFQUFFLElBQUksUUFBUSxFQUFFLCtCQUErQixDQUFDLENBQUM7WUFFeEUsT0FBTyxNQUFNLEVBQUUsQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUU7Z0JBQ3ZDLEdBQUcsRUFBRSxFQUFFLENBQUMsR0FBRztnQkFDWCxRQUFRLEVBQUUsT0FBTztnQkFDakIsSUFBSSxFQUFFLEtBQUs7Z0JBQ1gsTUFBTSxFQUFFLEdBQUc7Z0JBQ1gsUUFBUSxFQUFFLElBQUk7Z0JBQ2QsSUFBSSxFQUFFLEdBQUc7YUFDVCxDQUFDLENBQUM7UUFDSixDQUFDLENBQUMsT0FBTztRQUVUOztXQUVHO1FBQ0gsSUFBSSxDQUFDLE9BQXlCLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLFdBQVcsRUFBRSxHQUFHLElBQVc7WUFDekUsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsNkJBQTZCLENBQUMsQ0FBQztZQUUvQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFFdEMsT0FBTyxPQUFPLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO1lBRTNCLElBQUk7Z0JBQ0gsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO2FBQzVDO1lBQUMsT0FBTSxDQUFDLEVBQUU7Z0JBQ1YsT0FBTyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxFQUFFLEVBQUUsV0FBVyxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsTUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLENBQUM7YUFDN0Y7UUFDRixDQUFDLENBQUMsTUFBTTtRQUVSOztXQUVHO1FBQ0gsS0FBSyxDQUFDLElBQWtDLEVBQUUsRUFBRSxHQUFHLElBQTZCO1lBQzNFLElBQUksQ0FBQyxZQUFZLE1BQU07Z0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLENBQUM7aUJBQzVDLElBQUksQ0FBQyxZQUFZLFVBQVU7Z0JBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFakQsQ0FBQyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsaURBQWlELEVBQUUsSUFBSSxDQUFDLENBQUM7WUFFckgsTUFBTSxHQUFHLEdBQWEsQ0FBQyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFDbEMsR0FBRyxHQUFXLEdBQUcsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO1lBRTlCLENBQUMsR0FBRyxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7WUFFL0IsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7O2dCQUMxQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7WUFFdkMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQztZQUNwQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUVoRSxNQUFNLEdBQUcsR0FBWSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV4QyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsQ0FBQztZQUV0QixJQUFJLENBQUMsR0FBRztnQkFBRSxPQUFPLENBQUMsUUFBUSxDQUFDLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztZQUVyRCxJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBRW5DLE9BQU8sR0FBRyxDQUFDO1FBQ1osQ0FBQyxDQUFDLE9BQU87UUFDVDs7V0FFRztRQUNILE1BQU0sQ0FBQyxHQUFHLElBQXNDO1lBQy9DLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFHLEVBQUUsR0FBRyxJQUFJLEVBQUUsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ25ELENBQUMsQ0FBQyxRQUFRO1FBRVY7O1dBRUc7UUFDSCxVQUFVLENBQUMsTUFBeUIsT0FBTyxDQUFDLEdBQUc7WUFDOUMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNyQyxDQUFDLENBQUMsWUFBWTtRQUVkOztXQUVHO1FBQ0gsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFTLEVBQUUsQ0FBVSxFQUFFLE1BQWUsS0FBSztZQUNyRCxJQUFJLENBQUMsR0FBRztnQkFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7O2dCQUNsRCxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEUsSUFBSSxDQUFDLEdBQUcsSUFBSSxDQUFDO2dCQUFFLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztpQkFDdkQsSUFBSSxHQUFHLElBQUksQ0FBQztnQkFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFOUUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtnQkFDL0IsSUFBSSxJQUFhLENBQUM7Z0JBRWxCLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUM7Z0JBRTdCLElBQUksQ0FBQyxHQUFHLEVBQUU7b0JBQ1QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7b0JBQ25CLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQ3JDLElBQUksR0FBRyxRQUFRLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztpQkFDM0Q7cUJBQU07b0JBQ04sSUFBSSxDQUFDO3dCQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDO29CQUMzQixJQUFJLENBQUM7d0JBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7b0JBQzNCLElBQUksR0FBRyxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7aUJBQ2xFO1lBQ0YsQ0FBQyxDQUFDLENBQUM7UUFDSixDQUFDLENBQUMsTUFBTTtRQUNSOztXQUVHO1FBQ0gsS0FBSyxDQUFDLEtBQUssQ0FBQyxLQUF5QixFQUFFLE1BQXFCLENBQUMsRUFBRSxHQUFhO1lBQzNFLE9BQU8sSUFBSSxPQUFPLENBQUMsS0FBSyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsRUFBRTtnQkFDckMsTUFBTSxHQUFHLEdBQXFCLENBQUMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7Z0JBQy9DLElBQUksR0FBRyxHQUFZLElBQUksQ0FBQztnQkFFeEIsSUFBSSxDQUFDLEtBQUssRUFBRTtvQkFDWCxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRTt3QkFDOUIsR0FBRyxHQUFHLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxHQUFHLEVBQUU7NEJBQzlDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUMvQyxDQUFDLENBQUMsQ0FBQztvQkFDSixDQUFDLENBQUMsQ0FBQztpQkFDSDtxQkFBTSxJQUFJLE9BQU8sS0FBSyxJQUFJLFFBQVEsSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO29CQUNqRCxHQUFHLEdBQUcsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUU7d0JBQzdDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO29CQUMvQyxDQUFDLENBQUMsQ0FBQztpQkFDSDtxQkFBTSxJQUFJLE9BQU8sS0FBSyxJQUFJLFFBQVEsRUFBRTtvQkFDcEMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUU7d0JBQ2xDLEdBQUcsR0FBRyxRQUFRLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTs0QkFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7d0JBQy9DLENBQUMsQ0FBQyxDQUFDO29CQUNKLENBQUMsQ0FBQyxDQUFDO2lCQUNIO3FCQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFO29CQUN6QixHQUFHLEdBQUcsUUFBUSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRTt3QkFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7b0JBQy9DLENBQUMsQ0FBQyxDQUFDO2lCQUNIOztvQkFDQSxPQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUVwRyxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUMxQyxDQUFDLENBQUMsQ0FBQztRQUNKLENBQUMsQ0FBQyxPQUFPO1FBVVQsSUFBSSxDQUFDLFNBQTBCLEVBQUUsUUFBa0M7WUFDbEUsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxRQUFRLENBQUMsQ0FBQztRQUN4QyxDQUFDLENBQUMsTUFBTTtRQVNSLEVBQUUsQ0FBQyxTQUEwQixFQUFFLFFBQWtDO1lBQ2hFLE9BQU8sS0FBSyxDQUFDLEVBQUUsQ0FBQyxTQUFTLEVBQUUsUUFBUSxDQUFDLENBQUM7UUFDdEMsQ0FBQyxDQUFDLElBQUk7UUFTTixJQUFJLENBQUMsU0FBMEIsRUFBRSxHQUFHLElBQVc7WUFDOUMsT0FBTyxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ3ZDLENBQUMsQ0FBQyxNQUFNO01BRVAsS0FBSztJQXZZTSxPQUFHLE1BdVlmLENBQUE7QUFFRixDQUFDLEVBdGFhLEdBQUcsR0FBSCxXQUFHLEtBQUgsV0FBRyxRQXNhaEIsQ0FBQyxLQUFLO0FBSVAsa0JBQWUsR0FBRyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vUkdMTS50c1wiPlxyXG5cclxuXCJ1c2Ugc3RyaWN0XCI7XHJcblxyXG5leHBvcnQgdHlwZSBPcHRpb25hbHNPbmx5PFQgZXh0ZW5kcyBvYmplY3Q+ID0gUGljazxULCBFeGNsdWRlPHtcclxuXHRbSyBpbiBrZXlvZiBUXT86IFQgZXh0ZW5kcyBSZWNvcmQ8SywgVFtLXT4gPyBuZXZlciA6IEtcclxufVtrZXlvZiBUXSwgdW5kZWZpbmVkPj47XHJcbmV4cG9ydCB0eXBlIE5vbk9wdGlvbmFsczxUIGV4dGVuZHMgb2JqZWN0PiA9IHtcclxuXHRbayBpbiBrZXlvZiBUXS0/OiB1bmRlZmluZWQgZXh0ZW5kcyBUW2tdID8gbmV2ZXIgOiBrXHJcbn1ba2V5b2YgVF07XHJcbmV4cG9ydCB0eXBlIE51bGxhYmxlPFQ+ID0gVCB8IG51bGwgfCB1bmRlZmluZWQ7XHJcbmV4cG9ydCB0eXBlIE51bGxhYmxlQXJyYXk8VD4gPSBbIF0gfCBUO1xyXG5cclxuaW1wb3J0ICogYXMgYXNzZXJ0IGZyb20gXCJhc3NlcnRcIjtcclxuaW1wb3J0ICogYXMgZXZlbnQgZnJvbSBcImV2ZW50c1wiO1xyXG5pbXBvcnQgKiBhcyByZWFkbGluZSBmcm9tIFwicmVhZGxpbmVcIjtcclxuaW1wb3J0ICogYXMgdHR5IGZyb20gXCJ0dHlcIjtcclxuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzLWV4dHJhXCI7XHJcbmltcG9ydCAqIGFzIG9zIGZyb20gXCJvc1wiO1xyXG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XHJcbmltcG9ydCAqIGFzIHJnbG0gZnJvbSBcIi4vUkdMTVwiO1xyXG5pbXBvcnQgKiBhcyB1dGlsIGZyb20gXCJ1dGlsXCI7XHJcblxyXG5leHBvcnQgbW9kdWxlIHJnbCB7XHJcblx0XHJcblx0Y29uc3QgZGJnID0gdXRpbC5kZWJ1Z2xvZyhcIlJHTFwiKTtcclxuXHRcclxuXHRkYmcoYGlucyAke19fZGlybmFtZX1gKTtcclxuXHRcclxuXHRleHBvcnQgY29uc3Qgc2Nyb2xsVXAgPSAoYnk6IG51bWJlciB8IHN0cmluZyA9IDEpID0+IGBcXHgxYlske2J5fVNgLFxyXG5cdFx0c2Nyb2xsRG93biA9IChieTogbnVtYmVyIHwgc3RyaW5nID0gMSkgPT4gYFxceDFiWyR7Ynl9VGAsXHJcblx0XHRzYXZlID0gYFxceDFiN1xceDFiW3NgLFxyXG5cdFx0cmVzdG9yZSA9IGBcXHgxYjhcXHgxYlt1YCxcclxuXHRcdG1vdXNlT24gPSBgXFx4MWJbMXpcXHgxYls/MTAwMDsxMDAzOzEwMDVoYCxcclxuXHRcdG1vdXNlT2ZmID0gYFxceDFiWzB6XFx4MWJbPzEwMDA7MTAwMzsxMDA1OzEwMDY7MTAxNWxgO1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIFBhY2thZ2UgQ29uZmlnXHJcblx0ICovXHJcblx0ZXhwb3J0IGludGVyZmFjZSBSR0xDZmcge1xyXG5cdFx0bmFtZTogc3RyaW5nO1xyXG5cdFx0ZGVzY3JpcHRpb24/OiBzdHJpbmc7XHJcblx0XHRtYWluOiBzdHJpbmc7XHJcblx0XHR2ZXJzaW9uPzogc3RyaW5nO1xyXG5cdFx0bWFwcGluZ3M/OiBzdHJpbmc7XHJcblx0XHRrZXl3b3Jkcz86IHN0cmluZ1tdO1xyXG5cdFx0XCIkc2NoZW1hXCI/OiBzdHJpbmc7XHJcblx0fSAvL1JHTENmZ1xyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIE1haW4gcGFja2FnaW5nIENsYXNzXHJcblx0ICovXHJcblx0ZXhwb3J0IGNsYXNzIFJHTCBleHRlbmRzIGV2ZW50LkV2ZW50RW1pdHRlciB7XHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogVFRZIHN0cmVhbXMgYm91bmQgdG8gYXBwXHJcblx0XHQgKi9cclxuXHRcdHByaXZhdGUgX2JvdW5kOiB7XHJcblx0XHRcdHNpbj86IHR0eS5SZWFkU3RyZWFtLFxyXG5cdFx0XHRzb3V0PzogdHR5LldyaXRlU3RyZWFtLFxyXG5cdFx0XHRzZXJyPzogdHR5LldyaXRlU3RyZWFtLFxyXG5cdFx0XHRzaW5iaW5kPzogTnVsbGFibGU8KGtleTogQnVmZmVyKSA9PiBhbnk+LFxyXG5cdFx0fSA9IHtcclxuXHRcdFx0c2luOiBwcm9jZXNzLnN0ZGluLFxyXG5cdFx0XHRzb3V0OiBwcm9jZXNzLnN0ZG91dCxcclxuXHRcdFx0c2VycjogcHJvY2Vzcy5zdGRlcnIsXHJcblx0XHRcdHNpbmJpbmQ6IG51bGwsXHJcblx0XHR9O1xyXG5cdFx0LyoqXHJcblx0XHQgKiBTT1VUIGN1cnNvciBzdGF0ZVxyXG5cdFx0ICovXHJcblx0XHRjdXJzb3I6IFtudW1iZXIsIG51bWJlcl0gPSBbIDAsIDAgXTtcclxuXHRcdC8qKlxyXG5cdFx0ICogU291cmNlIG9mIHBhY2thZ2UgQ29uZmlnIGluIGNhc2Ugb2YgZnMgbG9hZFxyXG5cdFx0ICovXHJcblx0XHQjX2xvYWRlZEZyb206IHN0cmluZyA9IFwiXCI7XHJcblx0XHRcclxuXHRcdHN0YXRpYyByZWFkb25seSBkZWZhdWx0czogUkdMQ2ZnID0ge1xyXG5cdFx0XHRkZXNjcmlwdGlvbjogXCJcIixcclxuXHRcdFx0bWFpbjogXCIuL21haW4uanNcIixcclxuXHRcdFx0dmVyc2lvbjogXCIwLjFcIixcclxuXHRcdFx0bWFwcGluZ3M6IFwiLi9tYXBwaW5ncy5qc1wiLFxyXG5cdFx0XHRuYW1lOiBwcm9jZXNzLnRpdGxlLFxyXG5cdFx0XHRrZXl3b3JkczogWyBdLFxyXG5cdFx0XHRcIiRzY2hlbWFcIjogcGF0aC5qb2luKF9fZGlybmFtZSwgXCIuLi8uLi9yZ2xjZmcuc2NoZW1hLmpzb25cIilcclxuXHRcdH07XHJcblx0XHQvKipcclxuXHRcdCAqIFNwZWNpYWwga2V5cyBmb3IgY29udmVuaWVuY2VcclxuXHRcdCAqL1xyXG5cdFx0c3RhdGljIHJlYWRvbmx5IHNwZWNpYWxfa2V5czoge1xyXG5cdFx0XHRjdHJsQzpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybFY6XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxaOlx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRjdHJsWTpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0dXA6XHRcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0ZG93bjpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0cmlnaHQ6XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGxlZnQ6XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdHNoaWZ0VXA6XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRzaGlmdERvd246XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRzaGlmdFJpZ2h0Olx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0c2hpZnRMZWZ0Olx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybFVwOlx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRjdHJsRG93bjpcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxSaWdodDpcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxMZWZ0Olx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Zm5VcDpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Zm5Eb3duOlx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRmbkxlZnQ6XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGZuUmlnaHQ6XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRjdHJsU2hpZnRVcDpcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRjdHJsU2hpZnREb3duOlx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxTaGlmdFJpZ2h0Olx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGN0cmxTaGlmdExlZnQ6XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybEZuVXA6XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRjdHJsRm5Eb3duOlx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybEZuUmlnaHQ6XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0Y3RybEZuTGVmdDpcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGVudGVyOlx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0XHRhbHRFbnRlcjpcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGJhY2s6XHRcdFx0UmVhZG9ubHk8Tm9uTnVsbGFibGU8QnVmZmVyPj47XHJcblx0XHRcdGRlbDpcdFx0XHRSZWFkb25seTxOb25OdWxsYWJsZTxCdWZmZXI+PjtcclxuXHRcdFx0dGFiOlx0XHRcdFJlYWRvbmx5PE5vbk51bGxhYmxlPEJ1ZmZlcj4+O1xyXG5cdFx0fSA9IHtcclxuXHRcdFx0Y3RybEM6XHRcdFx0QnVmZmVyLmZyb20oXCIwM1wiLFx0XHRcdFwiaGV4XCIpLFxyXG5cdFx0XHRjdHJsVjpcdFx0XHRCdWZmZXIuZnJvbShcIjE2XCIsXHRcdFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxaOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMWFcIixcdFx0XHRcImhleFwiKSxcclxuXHRcdFx0Y3RybFk6XHRcdFx0QnVmZmVyLmZyb20oXCIxOVwiLFx0XHRcdFwiaGV4XCIpLFxyXG5cdFx0XHR1cDpcdFx0XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjQxXCIsXHRcdFwiaGV4XCIpLFxyXG5cdFx0XHRkb3duOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjQyXCIsXHRcdFwiaGV4XCIpLFxyXG5cdFx0XHRyaWdodDpcdFx0XHRCdWZmZXIuZnJvbShcIjFiNWI0M1wiLFx0XHRcImhleFwiKSxcclxuXHRcdFx0bGVmdDpcdFx0XHRCdWZmZXIuZnJvbShcIjFiNWI0NFwiLFx0XHRcImhleFwiKSxcclxuXHRcdFx0c2hpZnRVcDpcdFx0QnVmZmVyLmZyb20oXCIxYjViMzEzYjMyNDFcIixcdFwiaGV4XCIpLFxyXG5cdFx0XHRzaGlmdERvd246XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzMjQyXCIsXHRcImhleFwiKSxcclxuXHRcdFx0c2hpZnRSaWdodDpcdFx0QnVmZmVyLmZyb20oXCIxYjViMzEzYjMyNDNcIixcdFwiaGV4XCIpLFxyXG5cdFx0XHRzaGlmdExlZnQ6XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzMjQ0XCIsXHRcImhleFwiKSxcclxuXHRcdFx0Y3RybFVwOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzNTQxXCIsXHRcImhleFwiKSxcclxuXHRcdFx0Y3RybERvd246XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzNTQyXCIsXHRcImhleFwiKSxcclxuXHRcdFx0Y3RybFJpZ2h0Olx0XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzU0M1wiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxMZWZ0Olx0XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzU0NFwiLFx0XCJoZXhcIiksXHJcblx0XHRcdGZuVXA6XHRcdFx0QnVmZmVyLmZyb20oXCIxYjViMzU3ZVwiLFx0XHRcImhleFwiKSxcclxuXHRcdFx0Zm5Eb3duOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjM2N2VcIixcdFx0XCJoZXhcIiksXHJcblx0XHRcdGZuUmlnaHQ6XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjM0N2VcIixcdFx0XCJoZXhcIiksXHJcblx0XHRcdGZuTGVmdDpcdFx0XHRCdWZmZXIuZnJvbShcIjFiNWIzMTdlXCIsXHRcdFwiaGV4XCIpLFxyXG5cdFx0XHRjdHJsU2hpZnRVcDpcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzNjQxXCIsXHRcImhleFwiKSxcclxuXHRcdFx0Y3RybFNoaWZ0RG93bjpcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzNjQyXCIsXHRcImhleFwiKSxcclxuXHRcdFx0Y3RybFNoaWZ0UmlnaHQ6XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzY0M1wiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxTaGlmdExlZnQ6XHRCdWZmZXIuZnJvbShcIjFiNWIzMTNiMzY0NFwiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxGblVwOlx0XHRCdWZmZXIuZnJvbShcIjFiNWIzNTNiMzU3ZVwiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxGbkRvd246XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjM2M2IzNTdlXCIsXHRcImhleFwiKSxcclxuXHRcdFx0Y3RybEZuUmlnaHQ6XHRCdWZmZXIuZnJvbShcIjFiNWIzNDNiMzU3ZVwiLFx0XCJoZXhcIiksXHJcblx0XHRcdGN0cmxGbkxlZnQ6XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjMxM2IzNTdlXCIsXHRcImhleFwiKSxcclxuXHRcdFx0ZW50ZXI6XHRcdFx0QnVmZmVyLmZyb20oXCIwZFwiLFx0XHRcdFwiaGV4XCIpLCAvLzBkID0gXFxyLCAwYSA9IFxcblxyXG5cdFx0XHRhbHRFbnRlcjpcdFx0QnVmZmVyLmZyb20oXCIxYjBkXCIsXHRcdFx0XCJoZXhcIiksIC8vK2N0cmxBbHRFbnRlciArc2hpZnRBbHRFbnRlclxyXG5cdFx0XHRiYWNrOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMDhcIixcdFx0XHRcImhleFwiKSwgLy8rY3RybEhcclxuXHRcdFx0ZGVsOlx0XHRcdEJ1ZmZlci5mcm9tKFwiMWI1YjMzN2VcIixcdFx0XCJoZXhcIiksXHJcblx0XHRcdHRhYjpcdFx0XHRCdWZmZXIuZnJvbShcIjA5XCIsXHRcdFx0XCJoZXhcIiksXHJcblx0XHR9O1xyXG5cdFx0XHJcblx0XHRjb25zdHJ1Y3RvcihwdWJsaWMgY2ZnOiBQYXJ0aWFsPFJHTENmZz4pIHtcclxuXHRcdFx0c3VwZXIoKTtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuY2ZnID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUobnVsbCksIFJHTC5kZWZhdWx0cyksIGNmZyk7XHJcblx0XHRcdFxyXG5cdFx0XHRhc3NlcnQub2sodGhpcy5jZmcubmFtZSwgXCJSR0wgJ25hbWUnIG11c3QgYmUgcHJvdmlkZWQgaW4gdGhlIGNvbmZpZ1wiKTtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuY2ZnLm1haW5cdFx0PSBcIi4vXCIgKyBwYXRoLm5vcm1hbGl6ZSh0aGlzLmNmZy5tYWluXHRcdHx8IFJHTC5kZWZhdWx0cy5tYWluKTtcclxuXHRcdFx0dGhpcy5jZmcubWFwcGluZ3NcdD0gXCIuL1wiICsgcGF0aC5ub3JtYWxpemUodGhpcy5jZmcubWFwcGluZ3NcdHx8IFJHTC5kZWZhdWx0cy5tYXBwaW5ncyB8fCBcIi4vbWFwcGluZ3MuanNcIik7XHJcblx0XHRcdFxyXG5cdFx0XHQvL3Byb2Nlc3Muc3Rkb3V0LndyaXRlKGBcXHgxYl0wOyR7dGhpcy5jZmcubmFtZX1cXGFgKTtcclxuXHRcdFx0cHJvY2Vzcy50aXRsZSA9IHRoaXMuY2ZnLm5hbWUgfHwgcHJvY2Vzcy50aXRsZSB8fCBcIlJHTFwiO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5wYXJzZU1hcHBpbmdzKCk7XHJcblx0XHR9IC8vY3RvclxyXG5cdFx0XHJcblx0XHRnZXQgZGltZW5zKCk6IFtudW1iZXIsIG51bWJlcl0gfCBbMCwgMF0ge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5zb3V0Py5nZXRXaW5kb3dTaXplKCkgfHwgWzAsIDBdO1xyXG5cdFx0fSAvL2ctZGltZW5zXHJcblx0XHRnZXQgY0RwdCgpOiBudW1iZXIge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5jb2xvckRlcHRoKCk7XHJcblx0XHR9IC8vZy1jRHB0XHJcblx0XHRnZXQgc2VycigpOiB0dHkuV3JpdGVTdHJlYW0ge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5fYm91bmQuc2VyciB8fCB0aGlzLl9ib3VuZC5zb3V0IHx8IHByb2Nlc3Muc3RkZXJyO1xyXG5cdFx0fSAvL2ctc2VyclxyXG5cdFx0Z2V0IHNvdXQoKTogdHR5LldyaXRlU3RyZWFtIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2JvdW5kLnNvdXQgfHwgcHJvY2Vzcy5zdGRvdXQ7XHJcblx0XHR9IC8vZy1zb3V0XHJcblx0XHRnZXQgc2luKCk6IHR0eS5SZWFkU3RyZWFtIHtcclxuXHRcdFx0cmV0dXJuIHRoaXMuX2JvdW5kLnNpbiB8fCBwcm9jZXNzLnN0ZGluO1xyXG5cdFx0fSAvL2ctc2luXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogUGFyc2UgTWFwcGluZ3MgZnJvbSBGaWxlXHJcblx0XHQgKi9cclxuXHRcdHBhcnNlTWFwcGluZ3MoZnJvbTogTnVsbGFibGU8c3RyaW5nPiA9IHRoaXMuY2ZnLm1hcHBpbmdzKTogT2JqZWN0IHtcclxuXHRcdFx0YXNzZXJ0Lm9rKGZyb20sIFwiJ21hcHBpbmdzJyBtdXN0IGJlIGEgdmFsaWQgcGF0aFwiKTtcclxuXHRcdFx0XHJcblx0XHRcdGZyb20gPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgZnJvbSk7XHJcblx0XHRcdFxyXG5cdFx0XHRkZWxldGUgcmVxdWlyZS5jYWNoZVtmcm9tXTtcclxuXHRcdFx0XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0cmV0dXJuIHJnbG0uUkdMTS5SR0xNQ2h1bmsubWFwcGluZ3MgPSByZXF1aXJlKGZyb20pO1xyXG5cdFx0XHR9IGNhdGNoKGUpIHtcclxuXHRcdFx0XHRyZXR1cm4gcmdsbS5SR0xNLlJHTE1DaHVuay5tYXBwaW5ncyA9IHJlcXVpcmUodGhpcy5jZmcubWFwcGluZ3MgPSBwYXRoLmpvaW4oX19kaXJuYW1lLCBcIi4uLy4uL21hcHBpbmdzLmpzXCIpKTtcclxuXHRcdFx0fVxyXG5cdFx0fSAvL3BhcnNlTWFwcGluZ3NcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBDYXB0dXJlIGtleXMgZnJvbSBTSU5cclxuXHRcdCAqL1xyXG5cdFx0Y2FwdHVyZSh3aGljaDogdHR5LlJlYWRTdHJlYW0gPSB0aGlzLnNpbiwgYmluZCA9IHRydWUsIG91dDogdHR5LldyaXRlU3RyZWFtID0gdGhpcy5zb3V0LCBlcnI6IHR0eS5Xcml0ZVN0cmVhbSA9IHRoaXMuc2Vycik6IGJvb2xlYW4ge1xyXG5cdFx0XHRhc3NlcnQub2sod2hpY2guaXNUVFkgJiYgb3V0LmlzVFRZICYmIGVyci5pc1RUWSwgXCJTdHJlYW0gbXVzdCBiZSBUVFlcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoKHdoaWNoLmlzUmF3ICYmICFiaW5kKSB8fCAoIXdoaWNoLmlzUmF3ICYmIGJpbmQpKSB3aGljaC5zZXRSYXdNb2RlKGJpbmQpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHRoaXMuX2JvdW5kLnNpbmJpbmQgJiYgdGhpcy5fYm91bmQuc2luKSB7XHJcblx0XHRcdFx0dGhpcy5zaW4ucmVtb3ZlTGlzdGVuZXIoXCJkYXRhXCIsIHRoaXMuX2JvdW5kLnNpbmJpbmQhKTtcclxuXHRcdFx0XHR0aGlzLl9ib3VuZC5zaW5iaW5kID0gbnVsbDtcclxuXHRcdFx0XHR0aGlzLnNlcnIud3JpdGUocmdsLm1vdXNlT2ZmKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHdoaWNoLmlzUmF3KSB7XHJcblx0XHRcdFx0d2hpY2gub24oXCJkYXRhXCIsIHRoaXMuX2JvdW5kLnNpbmJpbmQgPSAoa2V5OiBCdWZmZXIpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuZW1pdChcInJhd2tleVwiLCBrZXkpO1xyXG5cdFx0XHRcdFx0dGhpcy5lbWl0KFwicmF3Y3RybGtleVwiLCBrZXkpO1xyXG5cdFx0XHRcdFx0dGhpcy5lbWl0KFwia2V5XCIsIGtleS50b1N0cmluZyhcInV0ZjhcIikpO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLl9ib3VuZC5zaW4gPSB3aGljaDtcclxuXHRcdFx0dGhpcy5fYm91bmQuc291dCA9IG91dDtcclxuXHRcdFx0dGhpcy5fYm91bmQuc2VyciA9IGVycjtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuc2Vyci53cml0ZShyZ2wubW91c2VPbik7XHJcblx0XHRcdFxyXG5cdFx0XHR0aGlzLmVtaXQoXCJkZWJ1Z1wiLCBgVFRZIHNldCB0byAke2JpbmR9YCk7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gd2hpY2guaXNSYXc7XHJcblx0XHR9IC8vY2FwdHVyZVxyXG5cdFx0XHJcblx0XHQvKipcclxuXHRcdCAqIExvYWQgcGFja2FnZSBDb25maWcgZnJvbSBGaWxlXHJcblx0XHQgKi9cclxuXHRcdHN0YXRpYyBhc3luYyBsb2FkKGZyb20/OiBzdHJpbmcgfCBQYXJ0aWFsPFJHTENmZz4pOiBQcm9taXNlPFJHTD4ge1xyXG5cdFx0XHRpZiAodHlwZW9mIGZyb20gIT0gXCJvYmplY3RcIikge1xyXG5cdFx0XHRcdGxldCBvdXQ6IFJHTDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoZnJvbSkge1xyXG5cdFx0XHRcdFx0b3V0ID0gbmV3IFJHTChhd2FpdCBmcy5yZWFkSlNPTihmcm9tLCB7XHJcblx0XHRcdFx0XHRcdGVuY29kaW5nOiBcImFzY2lpXCIsXHJcblx0XHRcdFx0XHRcdGZsYWc6IFwiclwiXHJcblx0XHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdG91dCA9IG5ldyBSR0woYXdhaXQgZnMucmVhZEpTT04oZnJvbSA9IFwiLi9yZ2xjZmcuanNvblwiLCB7XHJcblx0XHRcdFx0XHRcdFx0ZW5jb2Rpbmc6IFwiYXNjaWlcIixcclxuXHRcdFx0XHRcdFx0XHRmbGFnOiBcInJcIlxyXG5cdFx0XHRcdFx0XHR9KSk7XHJcblx0XHRcdFx0XHR9IGNhdGNoKGUpIHtcclxuXHRcdFx0XHRcdFx0b3V0ID0gbmV3IFJHTChhd2FpdCBmcy5yZWFkSlNPTihmcm9tID0gXCJwYWNrYWdlLmpzb25cIiwge1xyXG5cdFx0XHRcdFx0XHRcdGVuY29kaW5nOiBcImFzY2lpXCIsXHJcblx0XHRcdFx0XHRcdFx0ZmxhZzogXCJyXCJcclxuXHRcdFx0XHRcdFx0fSkpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRcclxuXHRcdFx0XHRvdXQuI19sb2FkZWRGcm9tID0gcGF0aC5yZXNvbHZlKGZyb20pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHJldHVybiBvdXQ7XHJcblx0XHRcdH0gZWxzZSByZXR1cm4gbmV3IFJHTChmcm9tKTtcclxuXHRcdH0gLy9sb2FkXHJcblx0XHQvKipcclxuXHRcdCAqIFN0b3JlIHBhY2thZ2UgQ29uZmlnIHRvIEZpbGVcclxuXHRcdCAqL1xyXG5cdFx0YXN5bmMgc3RvcmUodG86IHN0cmluZyA9IHRoaXMuI19sb2FkZWRGcm9tIHx8IFwiLi9yZ2xjZmcuanNvblwiLCByZXBsPzogKCh0aGlzOiBhbnksIGtleTogc3RyaW5nLCB2YWx1ZTogbnVtYmVyKSA9PiBhbnkpLCBwYWQ6IG51bWJlciA9IDIpOiBQcm9taXNlPGFueT4ge1xyXG5cdFx0XHRhc3NlcnQub2sodG8gJiYgdHlwZW9mIHRvID09IFwic3RyaW5nXCIsIFwiJ2NvbmZpZycgbXVzdCBiZSBhIHZhbGlkIHBhdGhcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gYXdhaXQgZnMud3JpdGVKU09OKHRvLCB0aGlzLmNmZywge1xyXG5cdFx0XHRcdEVPTDogb3MuRU9MLFxyXG5cdFx0XHRcdGVuY29kaW5nOiBcImFzY2lpXCIsXHJcblx0XHRcdFx0bW9kZTogMG83NzUsXHJcblx0XHRcdFx0c3BhY2VzOiBwYWQsXHJcblx0XHRcdFx0cmVwbGFjZXI6IHJlcGwsXHJcblx0XHRcdFx0ZmxhZzogXCJ3XCJcclxuXHRcdFx0fSk7XHJcblx0XHR9IC8vc3RvcmVcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBMYXVuY2ggcGFja2FnZSBlbnRyeVxyXG5cdFx0ICovXHJcblx0XHRleGVjKGZyb206IE51bGxhYmxlPHN0cmluZz4gPSB0aGlzLmNmZy5tYWluIHx8IFwiLi9tYWluLmpzXCIsIC4uLmRhdGE6IGFueVtdKTogYW55e1xyXG5cdFx0XHRhc3NlcnQub2soZnJvbSwgXCInbWFpbicgbXVzdCBiZSBhIHZhbGlkIHBhdGhcIik7XHJcblx0XHRcdFxyXG5cdFx0XHRmcm9tID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksIGZyb20pO1xyXG5cdFx0XHRcclxuXHRcdFx0ZGVsZXRlIHJlcXVpcmUuY2FjaGVbZnJvbV07XHJcblx0XHRcdFxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdHJldHVybiByZXF1aXJlKGZyb20pKHRoaXMsIG1vZHVsZSwgLi4uZGF0YSk7XHJcblx0XHRcdH0gY2F0Y2goZSkge1xyXG5cdFx0XHRcdHJldHVybiByZXF1aXJlKHRoaXMuY2ZnLm1haW4gPSBwYXRoLmpvaW4ocHJvY2Vzcy5jd2QoKSwgXCIuL21haW4uanNcIikpKHRoaXMsIG1vZHVsZSwgLi4uZGF0YSk7XHJcblx0XHRcdH1cclxuXHRcdH0gLy9leGVjXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogV3JpdGUtYW5kLWNvdW50IHRvIFNPVVRcclxuXHRcdCAqL1xyXG5cdFx0d3JpdGUoZDogc3RyaW5nIHwgVWludDhBcnJheSB8IEJ1ZmZlciA9IFwiXCIsIC4uLmRhdGE6IChzdHJpbmcgfCBVaW50OEFycmF5KVtdKTogYm9vbGVhbiB7XHJcblx0XHRcdGlmIChkIGluc3RhbmNlb2YgQnVmZmVyKSBkID0gZC50b1N0cmluZyhcImFzY2lpXCIpO1xyXG5cdFx0XHRlbHNlIGlmIChkIGluc3RhbmNlb2YgVWludDhBcnJheSkgZCA9IGQuam9pbignJyk7XHJcblx0XHRcdFxyXG5cdFx0XHRkID0gZC50b1N0cmluZygpLnJlcGxhY2VBbGwoJ1xcdCcsICcgJy5yZXBlYXQoNCkpLnJlcGxhY2VBbGwoLygoPzwhXFxyKVxcbig/IVxccil8KD88IVxcbilcXHIoPyFcXG4pfFxcclxcbnxcXG5cXHIpL2dtaXMsICdcXG4nKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IGNoczogc3RyaW5nW10gPSBkLnNwbGl0KCdcXG4nKSxcclxuXHRcdFx0XHRsZW46IG51bWJlciA9IGNocy5sZW5ndGggLSAxO1xyXG5cdFx0XHRcclxuXHRcdFx0ZCA9IGQucmVwbGFjZUFsbCgnXFxuJywgb3MuRU9MKTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChsZW4gPj0gMSkgdGhpcy5jdXJzb3JbMF0gPSBjaHNbbGVuXS5sZW5ndGg7XHJcblx0XHRcdGVsc2UgdGhpcy5jdXJzb3JbMF0gKz0gY2hzW2xlbl0ubGVuZ3RoO1xyXG5cdFx0XHRcclxuXHRcdFx0dGhpcy5jdXJzb3JbMF0gJT0gdGhpcy5zb3V0LmNvbHVtbnM7XHJcblx0XHRcdHRoaXMuY3Vyc29yWzFdID0gTWF0aC5taW4odGhpcy5jdXJzb3JbMV0gKyBsZW4sIHRoaXMuc291dC5yb3dzKTtcclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IG91dDogYm9vbGVhbiA9IHRoaXMuc291dC53cml0ZShkKTtcclxuXHRcdFx0XHJcblx0XHRcdHRoaXMuZW1pdChcIndyaXRlXCIsIGQpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFvdXQpIHByb2Nlc3MubmV4dFRpY2soKCkgPT4gdGhpcy5zb3V0LnVuY29yaygpKTtcclxuXHRcdFx0XHJcblx0XHRcdGRhdGEuZm9yRWFjaChkdCA9PiB0aGlzLndyaXRlKGR0KSk7XHJcblx0XHRcdFxyXG5cdFx0XHRyZXR1cm4gb3V0O1xyXG5cdFx0fSAvL3dyaXRlXHJcblx0XHQvKipcclxuXHRcdCAqIFdyaXRlLWFuZC1jb3VudC1uZXdsaW5lIHRvIFNPVVRcclxuXHRcdCAqL1xyXG5cdFx0d3JpdGVFKC4uLmRhdGE6IChzdHJpbmcgfCBVaW50OEFycmF5IHwgQnVmZmVyKVtdKTogYm9vbGVhbiB7XHJcblx0XHRcdHJldHVybiB0aGlzLndyaXRlKGRhdGEuc2hpZnQoKSEsIC4uLmRhdGEsIG9zLkVPTCk7XHJcblx0XHR9IC8vd3JpdGVFXHJcblx0XHRcclxuXHRcdC8qKlxyXG5cdFx0ICogR2V0IFRUWSBjb2xvciBkZXB0aFxyXG5cdFx0ICovXHJcblx0XHRjb2xvckRlcHRoKGVudjogTm9kZUpTLlByb2Nlc3NFbnYgPSBwcm9jZXNzLmVudik6IG51bWJlciB7XHJcblx0XHRcdHJldHVybiB0aGlzLnNvdXQuZ2V0Q29sb3JEZXB0aChlbnYpO1xyXG5cdFx0fSAvL2NvbG9yRGVwdGhcclxuXHRcdFxyXG5cdFx0LyoqXHJcblx0XHQgKiBNb3ZlLWFuZC1jb3VudCBTT1VUIGN1cnNvclxyXG5cdFx0ICovXHJcblx0XHRhc3luYyBtb3ZlKHg6IG51bWJlciwgeT86IG51bWJlciwgcmVsOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdFx0aWYgKCFyZWwpIHggPSBNYXRoLm1pbihNYXRoLm1heCh4LCAwKSwgdGhpcy5kaW1lbnNbMF0pO1xyXG5cdFx0XHRlbHNlIHggPSBNYXRoLm1pbihNYXRoLm1heCh4LCAtdGhpcy5kaW1lbnNbMF0pLCB0aGlzLmRpbWVuc1swXSk7XHJcblx0XHRcdGlmICghcmVsICYmIHkpIHkgPSBNYXRoLm1pbihNYXRoLm1heCh5LCAwKSwgdGhpcy5kaW1lbnNbMV0pO1xyXG5cdFx0XHRlbHNlIGlmIChyZWwgJiYgeSkgeSA9IE1hdGgubWluKE1hdGgubWF4KHksIC10aGlzLmRpbWVuc1sxXSksIHRoaXMuZGltZW5zWzFdKTtcclxuXHRcdFx0XHJcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZSgocmVzLCByZWopID0+IHtcclxuXHRcdFx0XHRsZXQgZGF0YTogYm9vbGVhbjtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHR0aGlzLmVtaXQoXCJtb3ZlXCIsIHgsIHksIHJlbCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCFyZWwpIHtcclxuXHRcdFx0XHRcdHRoaXMuY3Vyc29yWzBdID0geDtcclxuXHRcdFx0XHRcdHRoaXMuY3Vyc29yWzFdID0geSA/PyB0aGlzLmN1cnNvclsxXTtcclxuXHRcdFx0XHRcdGRhdGEgPSByZWFkbGluZS5jdXJzb3JUbyh0aGlzLnNvdXQsIHgsIHksICgpID0+IHJlcyhkYXRhKSk7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdGlmICh4KSB0aGlzLmN1cnNvclswXSArPSB4O1xyXG5cdFx0XHRcdFx0aWYgKHkpIHRoaXMuY3Vyc29yWzFdICs9IHk7XHJcblx0XHRcdFx0XHRkYXRhID0gcmVhZGxpbmUubW92ZUN1cnNvcih0aGlzLnNvdXQsIHgsIHkgPz8gMCwgKCkgPT4gcmVzKGRhdGEpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSAvL21vdmVcclxuXHRcdC8qKlxyXG5cdFx0ICogQ2xlYXItYW5kLXJlc3RvcmUgU09VVFxyXG5cdFx0ICovXHJcblx0XHRhc3luYyBjbGVhcihsaW5lcz86IG51bWJlcltdIHwgbnVtYmVyLCBkaXI6IHR0eS5EaXJlY3Rpb24gPSAwLCByZWw/OiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzLCByZWopID0+IHtcclxuXHRcdFx0XHRjb25zdCBzYXY6IFtudW1iZXIsIG51bWJlcl0gPSBbLi4udGhpcy5jdXJzb3JdO1xyXG5cdFx0XHRcdGxldCBvdXQ6IGJvb2xlYW4gPSB0cnVlO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmICghbGluZXMpIHtcclxuXHRcdFx0XHRcdHRoaXMubW92ZSgwLCAwLCByZWwpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRvdXQgPSByZWFkbGluZS5jbGVhclNjcmVlbkRvd24odGhpcy5zb3V0LCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdFx0dGhpcy5tb3ZlKC4uLnNhdiwgZmFsc2UpLnRoZW4oKCkgPT4gcmVzKG91dCkpO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGxpbmVzID09IFwibnVtYmVyXCIgJiYgbGluZXMgPCAwKSB7XHJcblx0XHRcdFx0XHRvdXQgPSByZWFkbGluZS5jbGVhckxpbmUodGhpcy5zb3V0LCBkaXIsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0dGhpcy5tb3ZlKC4uLnNhdiwgZmFsc2UpLnRoZW4oKCkgPT4gcmVzKG91dCkpO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgbGluZXMgPT0gXCJudW1iZXJcIikge1xyXG5cdFx0XHRcdFx0dGhpcy5tb3ZlKDAsIGxpbmVzLCByZWwpLnRoZW4oKCkgPT4ge1xyXG5cdFx0XHRcdFx0XHRvdXQgPSByZWFkbGluZS5jbGVhckxpbmUodGhpcy5zb3V0LCBkaXIsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0XHR0aGlzLm1vdmUoLi4uc2F2LCBmYWxzZSkudGhlbigoKSA9PiByZXMob3V0KSk7XHJcblx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fSBlbHNlIGlmICghbGluZXMubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRvdXQgPSByZWFkbGluZS5jbGVhclNjcmVlbkRvd24odGhpcy5zb3V0LCAoKSA9PiB7XHJcblx0XHRcdFx0XHRcdHRoaXMubW92ZSguLi5zYXYsIGZhbHNlKS50aGVuKCgpID0+IHJlcyhvdXQpKTtcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdH0gZWxzZVxyXG5cdFx0XHRcdFx0cmV0dXJuIFByb21pc2UuYWxsKGxpbmVzLm1hcChsID0+IHRoaXMuY2xlYXIobCwgZGlyLCByZWwpKSkudGhlbihicyA9PiByZXMoYnMuZXZlcnkoYiA9PiBiKSksIHJlaik7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0dGhpcy5lbWl0KFwiY2xlYXJcIiwgbGluZXMsIGRpciwgcmVsLCBvdXQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0gLy9jbGVhclxyXG5cdFx0XHJcblx0XHRvbmNlKGV2ZW50bmFtZTogXCJsb2dcIiwgbGlzdGVuZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHRoaXM7XHJcblx0XHRvbmNlKGV2ZW50bmFtZTogXCJkZWJ1Z1wiLCBsaXN0ZW5lcjogKC4uLmFyZ3M6IGFueVtdKSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uY2UoZXZlbnRuYW1lOiBcImNsZWFyXCIsIGxpc3RlbmVyOiAobGluZXM6IG51bWJlciwgZGlyOiB0dHkuRGlyZWN0aW9uLCByZWw6IGJvb2xlYW4sIG91dDogYm9vbGVhbikgPT4gdm9pZCk6IHRoaXM7XHJcblx0XHRvbmNlKGV2ZW50bmFtZTogXCJ3cml0ZVwiLCBsaXN0ZW5lcjogKGQ6IHN0cmluZyB8IFVpbnQ4QXJyYXkpID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b25jZShldmVudG5hbWU6IFwibW92ZVwiLCBsaXN0ZW5lcjogKHg6IG51bWJlciwgeTogbnVtYmVyLCByZWw6IGJvb2xlYW4pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b25jZShldmVudG5hbWU6IFwia2V5XCIsIGxpc3RlbmVyOiAoa2V5OiBzdHJpbmcpID0+IHN0cmluZyk6IHRoaXM7XHJcblx0XHRvbmNlKGV2ZW50bmFtZTogXCJyYXdrZXlcIiwgbGlzdGVuZXI6IChrZXk6IEJ1ZmZlcikgPT4gQnVmZmVyKTogdGhpcztcclxuXHRcdG9uY2UoZXZlbnRuYW1lOiBzdHJpbmcgfCBzeW1ib2wsIGxpc3RlbmVyOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b25jZShldmVudG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgbGlzdGVuZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHRoaXMge1xyXG5cdFx0XHRyZXR1cm4gc3VwZXIub25jZShldmVudG5hbWUsIGxpc3RlbmVyKTtcclxuXHRcdH0gLy9vbmNlXHJcblx0XHRvbihldmVudG5hbWU6IFwibG9nXCIsIGxpc3RlbmVyOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b24oZXZlbnRuYW1lOiBcImRlYnVnXCIsIGxpc3RlbmVyOiAoLi4uYXJnczogYW55W10pID0+IHZvaWQpOiB0aGlzO1xyXG5cdFx0b24oZXZlbnRuYW1lOiBcImNsZWFyXCIsIGxpc3RlbmVyOiAobGluZXM6IG51bWJlciwgZGlyOiB0dHkuRGlyZWN0aW9uLCByZWw6IGJvb2xlYW4sIG91dDogYm9vbGVhbikgPT4gdm9pZCk6IHRoaXM7XHJcblx0XHRvbihldmVudG5hbWU6IFwid3JpdGVcIiwgbGlzdGVuZXI6IChkOiBzdHJpbmcgfCBVaW50OEFycmF5KSA9PiB2b2lkKTogdGhpcztcclxuXHRcdG9uKGV2ZW50bmFtZTogXCJtb3ZlXCIsIGxpc3RlbmVyOiAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHJlbDogYm9vbGVhbikgPT4gdm9pZCk6IHRoaXM7XHJcblx0XHRvbihldmVudG5hbWU6IFwia2V5XCIsIGxpc3RlbmVyOiAoa2V5OiBzdHJpbmcpID0+IHN0cmluZyk6IHRoaXM7XHJcblx0XHRvbihldmVudG5hbWU6IFwicmF3a2V5XCIsIGxpc3RlbmVyOiAoa2V5OiBCdWZmZXIpID0+IEJ1ZmZlcik6IHRoaXM7XHJcblx0XHRvbihldmVudG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgbGlzdGVuZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHRoaXM7XHJcblx0XHRvbihldmVudG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgbGlzdGVuZXI6ICguLi5hcmdzOiBhbnlbXSkgPT4gdm9pZCk6IHRoaXMge1xyXG5cdFx0XHRyZXR1cm4gc3VwZXIub24oZXZlbnRuYW1lLCBsaXN0ZW5lcik7XHJcblx0XHR9IC8vb25cclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBcImxvZ1wiLCAuLi5hcmdzOiBhbnlbXSk6IGFueTtcclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBcImRlYnVnXCIsIC4uLmFyZ3M6IGFueVtdKTogYW55O1xyXG5cdFx0ZW1pdChldmVudG5hbWU6IFwiY2xlYXJcIiwgbGluZXM6IG51bWJlciwgZGlyOiB0dHkuRGlyZWN0aW9uLCByZWw6IGJvb2xlYW4sIG91dDogYm9vbGVhbik6IGFueTtcclxuXHRcdGVtaXQoZXZlbnRuYW1lOiBcIndyaXRlXCIsIGQ6IHN0cmluZyB8IFVpbnQ4QXJyYXkpOiBzdHJpbmc7XHJcblx0XHRlbWl0KGV2ZW50bmFtZTogXCJtb3ZlXCIsIHg6IG51bWJlciwgeTogbnVtYmVyLCByZWw6IGJvb2xlYW4pOiBib29sZWFuO1xyXG5cdFx0ZW1pdChldmVudG5hbWU6IFwia2V5XCIsIGtleTogc3RyaW5nKTogc3RyaW5nO1xyXG5cdFx0ZW1pdChldmVudG5hbWU6IFwicmF3a2V5XCIsIGtleTogQnVmZmVyKTogQnVmZmVyO1xyXG5cdFx0ZW1pdChldmVudG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgLi4uYXJnczogYW55W10pOiBib29sZWFuO1xyXG5cdFx0ZW1pdChldmVudG5hbWU6IHN0cmluZyB8IHN5bWJvbCwgLi4uYXJnczogYW55W10pOiBhbnkge1xyXG5cdFx0XHRyZXR1cm4gc3VwZXIuZW1pdChldmVudG5hbWUsIC4uLmFyZ3MpO1xyXG5cdFx0fSAvL2VtaXRcclxuXHRcdFxyXG5cdH0gLy9SR0xcclxuXHRcclxufSAvL3JnbFxyXG5cclxuZXhwb3J0IHsgcmdsbSB9O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgcmdsO1xyXG4iXX0=